From e21def9230aabc6e181b15b85ffd601f57d0f24b Mon Sep 17 00:00:00 2001
From: Michael Hanke <michael.hanke@gmail.com>
Date: Fri, 29 Apr 2011 14:36:39 -0400
Subject: [PATCH 2/2] Shared libs

--- a/GEMS/Makefile.am
+++ b/GEMS/Makefile.am
@@ -27,9 +27,9 @@
 
 AM_LDFLAGS=
 
-noinst_LIBRARIES=libkvlAtlas3DCommon.a
+lib_LTLIBRARIES=libkvlAtlas3DCommon.la
 
-libkvlAtlas3DCommon_a_SOURCES= \
+libkvlAtlas3DCommon_la_SOURCES= \
 		kvlAtlasMeshCollection.cxx \
 		gzstream.cxx \
 		kvlAtlasMeshCollectionValidator.cxx \
@@ -55,13 +55,11 @@
                 kvlAtlasMeshDeformationLevenbergMarquardtOptimizer.cxx \
 		kvlAtlasMeshHamiltonianPositionSampler.cxx
 
-am_libkvlAtlas3DCommon_a_OBJECTS=$(libkvlAtlas3DCommon_a_SOURCES:%.cxx=%.o)
-libkvlAtlas3DCommon_a_LIBADD= \
-			 $(top_builddir)/itkio/libitkio.a \
-			 $(top_builddir)/itkutils/libitkutils.a	 \
+am_libkvlAtlas3DCommon_la_OBJECTS=$(libkvlAtlas3DCommon_la_SOURCES:%.cxx=%.lo)
+libkvlAtlas3DCommon_la_LIBADD= \
 			 $(LIBS_ITK) \
-			 $(top_builddir)/tetgen/libtetgen.a \
-			 $(addprefix $(top_builddir)/, $(LIBS_MGH))
+			 $(top_builddir)/tetgen/libtetgen.la \
+			 $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 bin_PROGRAMS=\
 			 kvlSmoothMesh \
@@ -103,7 +101,6 @@
 			 kvlBinaryThresholdImage \
 			 kvlUpsample \
 			 kvlRasterizeAtlasMesh \
-			 kvlAutoCrop \
 			 kvlMaskImage \
 			 kvlApplyTransform
 
@@ -165,82 +162,82 @@
 
 kvlSmoothMesh_SOURCES=kvlSmoothMesh.cxx
 kvlSmoothMesh_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlSmoothMesh_LDFLAGS= $(OS_LDFLAGS)
 
 kvlCrop_SOURCES=kvlCrop.cxx
 kvlCrop_LDADD=$(LIBS_ITK) \
-			 $(top_builddir)/itkio/libitkio.a \
-			 $(top_builddir)/itkutils/libitkutils.a \
+			 $(top_builddir)/itkio/libitkio.la \
+			 $(top_builddir)/itkutils/libitkutils.la \
 			 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 			 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlCrop_LDFLAGS= $(OS_LDFLAGS)
 
 kvlChangeKOfMeshCollection_SOURCES=kvlChangeKOfMeshCollection.cxx
 kvlChangeKOfMeshCollection_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlChangeKOfMeshCollection_LDFLAGS= $(OS_LDFLAGS)
 
 kvlChangePointParametersOfMeshCollection_SOURCES=kvlChangePointParametersOfMeshCollection.cxx
 kvlChangePointParametersOfMeshCollection_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlChangePointParametersOfMeshCollection_LDFLAGS= $(OS_LDFLAGS)
 
 kvlMapDeformationField_SOURCES=kvlMapDeformationField.cxx
 kvlMapDeformationField_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlMapDeformationField_LDFLAGS= $(OS_LDFLAGS)
 
 kvlUpsampleMesh_SOURCES=kvlUpsampleMesh.cxx
 kvlUpsampleMesh_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlUpsampleMesh_LDFLAGS= $(OS_LDFLAGS)
 
 kvlSetReferencePosition_SOURCES=kvlSetReferencePosition.cxx
 kvlSetReferencePosition_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlSetReferencePosition_LDFLAGS= $(OS_LDFLAGS)
 
 kvlCompressImage_SOURCES=kvlCompressImage.cxx
 kvlCompressImage_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlCompressImage_LDFLAGS= $(OS_LDFLAGS)
 
 kvlBuildAtlasMeshWithoutGUI_SOURCES=kvlBuildAtlasMeshWithoutGUI.cxx
 kvlBuildAtlasMeshWithoutGUI_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
-				 $(top_builddir)/tetgen/libtetgen.a \
+				 $(top_builddir)/tetgen/libtetgen.la \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlBuildAtlasMeshWithoutGUI_LDFLAGS= $(OS_LDFLAGS)
 
@@ -264,123 +261,123 @@
 
 kvlCropImage_SOURCES=kvlCropImage.cxx
 kvlCropImage_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlCropImage_LDFLAGS= $(OS_LDFLAGS)
 
 kvlCombineManualSegmentationProtocols_SOURCES=kvlCombineManualSegmentationProtocols.cxx
 kvlCombineManualSegmentationProtocols_LDADD=$(LIBS_ITK) \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlCombineManualSegmentationProtocols_LDFLAGS= $(OS_LDFLAGS)
 
 kvlReduceNumberOfIntensityLevels_SOURCES=kvlReduceNumberOfIntensityLevels.cxx
 kvlReduceNumberOfIntensityLevels_LDADD=$(LIBS_ITK) \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKStatistics -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlReduceNumberOfIntensityLevels_LDFLAGS= $(OS_LDFLAGS)
 
 kvlAugmentManualSegmentationWithAutomatedSegmentation_SOURCES=kvlAugmentManualSegmentationWithAutomatedSegmentation.cxx
 kvlAugmentManualSegmentationWithAutomatedSegmentation_LDADD=$(LIBS_ITK) \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlAugmentManualSegmentationWithAutomatedSegmentation_LDFLAGS= $(OS_LDFLAGS)
 
 kvlScaleMeshCollection_SOURCES=kvlScaleMeshCollection.cxx
 kvlScaleMeshCollection_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlScaleMeshCollection_LDFLAGS= $(OS_LDFLAGS)
 
 kvlMapLabelsOfAtlasMesh_SOURCES=kvlMapLabelsOfAtlasMesh.cxx
 kvlMapLabelsOfAtlasMesh_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlMapLabelsOfAtlasMesh_LDFLAGS= $(OS_LDFLAGS)
 
 kvlSegmentWithoutGUI_SOURCES=kvlSegmentWithoutGUI.cxx
 kvlSegmentWithoutGUI_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlSegmentWithoutGUI_LDFLAGS= $(OS_LDFLAGS)
 
 kvlEvaluateQuantitatively_SOURCES=kvlEvaluateQuantitatively.cxx
 kvlEvaluateQuantitatively_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlEvaluateQuantitatively_LDFLAGS= $(OS_LDFLAGS)
 
 kvlEvaluateQuantitativelyWithHausdorffDistance_SOURCES=kvlEvaluateQuantitativelyWithHausdorffDistance.cxx
 kvlEvaluateQuantitativelyWithHausdorffDistance_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlEvaluateQuantitativelyWithHausdorffDistance_LDFLAGS= $(OS_LDFLAGS)
 
 kvlCorrectLeftSideLabelsToRightSideLabels_SOURCES=kvlCorrectLeftSideLabelsToRightSideLabels.cxx
 kvlCorrectLeftSideLabelsToRightSideLabels_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlCorrectLeftSideLabelsToRightSideLabels_LDFLAGS= $(OS_LDFLAGS)
 
 kvlOverwriteEmptySlices_SOURCES=kvlOverwriteEmptySlices.cxx
 kvlOverwriteEmptySlices_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlOverwriteEmptySlices_LDFLAGS= $(OS_LDFLAGS)
 
 kvlOptimizePositionsWithICM_SOURCES=kvlOptimizePositionsWithICM.cxx
 kvlOptimizePositionsWithICM_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlOptimizePositionsWithICM_LDFLAGS= $(OS_LDFLAGS)
 
 kvlCalculatePositionCost_SOURCES=kvlCalculatePositionCost.cxx
 kvlCalculatePositionCost_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlCalculatePositionCost_LDFLAGS= $(OS_LDFLAGS)
 
 kvlCalculateAtlasMeshCollectionTotalCost_SOURCES=kvlCalculateAtlasMeshCollectionTotalCost.cxx
 kvlCalculateAtlasMeshCollectionTotalCost_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKAlgorithms -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlCalculateAtlasMeshCollectionTotalCost_LDFLAGS= $(OS_LDFLAGS)
@@ -405,180 +402,180 @@
 
 kvlColorCodeProbabilityImages_SOURCES=kvlColorCodeProbabilityImages.cxx
 kvlColorCodeProbabilityImages_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlColorCodeProbabilityImages_LDFLAGS= $(OS_LDFLAGS)
 
 kvlSamplePositionsFromMeshCollection_SOURCES=kvlSamplePositionsFromMeshCollection.cxx
 kvlSamplePositionsFromMeshCollection_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlSamplePositionsFromMeshCollection_LDFLAGS= $(OS_LDFLAGS)
 
 kvlAddMeshToMeshCollection_SOURCES=kvlAddMeshToMeshCollection.cxx
 kvlAddMeshToMeshCollection_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlAddMeshToMeshCollection_LDFLAGS= $(OS_LDFLAGS)
 
 kvlMergeMeshCollections_SOURCES=kvlMergeMeshCollections.cxx
 kvlMergeMeshCollections_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlMergeMeshCollections_LDFLAGS= $(OS_LDFLAGS)
 
 kvlAddCSFToBucknerData_SOURCES=kvlAddCSFToBucknerData.cxx
 kvlAddCSFToBucknerData_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlAddCSFToBucknerData_LDFLAGS= $(OS_LDFLAGS)
 
 kvlAddBorder_SOURCES=kvlAddBorder.cxx
 kvlAddBorder_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlAddBorder_LDFLAGS= $(OS_LDFLAGS)
 
 kvlQuantifyPosteriorProbabilityImages_SOURCES=kvlQuantifyPosteriorProbabilityImages.cxx
 kvlQuantifyPosteriorProbabilityImages_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlQuantifyPosteriorProbabilityImages_LDFLAGS= $(OS_LDFLAGS)
 
 kvlEMSegment_SOURCES=kvlEMSegment.cxx
 kvlEMSegment_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlEMSegment_LDFLAGS= $(OS_LDFLAGS)
 
 kvlAddProbabilityImages_SOURCES=kvlAddProbabilityImages.cxx
 kvlAddProbabilityImages_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlAddProbabilityImages_LDFLAGS= $(OS_LDFLAGS)
 
 kvlMathematicalMorphology_SOURCES=kvlMathematicalMorphology.cxx
 kvlMathematicalMorphology_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlMathematicalMorphology_LDFLAGS= $(OS_LDFLAGS)
 
 kvlConvert_SOURCES=kvlConvert.cxx
 kvlConvert_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlConvert_LDFLAGS= $(OS_LDFLAGS)
 
 kvlRegister_SOURCES=kvlRegister.cxx
 kvlRegister_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlRegister_LDFLAGS= $(OS_LDFLAGS)
 
 kvlResample_SOURCES=kvlResample.cxx
 kvlResample_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlResample_LDFLAGS= $(OS_LDFLAGS)
 
 kvlBinaryThresholdImage_SOURCES=kvlBinaryThresholdImage.cxx
 kvlBinaryThresholdImage_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlBinaryThresholdImage_LDFLAGS= $(OS_LDFLAGS)
 
 kvlUpsample_SOURCES=kvlUpsample.cxx
 kvlUpsample_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlUpsample_LDFLAGS= $(OS_LDFLAGS)
 
 kvlRasterizeAtlasMesh_SOURCES=kvlRasterizeAtlasMesh.cxx
 kvlRasterizeAtlasMesh_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlRasterizeAtlasMesh_LDFLAGS= $(OS_LDFLAGS)
 
 kvlAutoCrop_SOURCES=kvlAutoCrop.cxx
 kvlAutoCrop_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlAutoCrop_LDFLAGS= $(OS_LDFLAGS)
 
 kvlMaskImage_SOURCES=kvlMaskImage.cxx
 kvlMaskImage_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlMaskImage_LDFLAGS= $(OS_LDFLAGS)
 
 kvlApplyTransform_SOURCES=kvlApplyTransform.cxx
 kvlApplyTransform_LDADD=$(LIBS_ITK) \
-				 libkvlAtlas3DCommon.a \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
+				 libkvlAtlas3DCommon.la \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
 				 -lITKCommon -lITKIO -lITKznz \
 				 $(addprefix $(top_builddir)/, $(LIBS_MGH) )
 kvlApplyTransform_LDFLAGS= $(OS_LDFLAGS)
 
 if HAVE_FLTK_LIBS
-noinst_LIBRARIES+=libkvlAtlas3DGUI.a
-libkvlAtlas3DGUI_a_SOURCES = vtkFlRenderWindowInteractor.cxx \
+lib_LTLIBRARIES+=libkvlAtlas3DGUI.la
+libkvlAtlas3DGUI_la_SOURCES = vtkFlRenderWindowInteractor.cxx \
 						kvlImageViewer.cxx
-libkvlAtlas3DGUI_a_LIBADD=$(LIBS_ITK) \
+libkvlAtlas3DGUI_la_LIBADD=$(LIBS_ITK) \
 			#-lITKCommon -lITKAlgorithms -lITKIO -lITKznz -lITKBasicFilters \
 			$(VTK_LIBS) \
 			#-lvtkCommon -lvtkImaging -lvtkIO -lvtkRendering \
@@ -595,10 +592,10 @@
 						 kvlEstimateAtlasParameters.cxx \
 						 kvlAtlasParameterEstimationConsole.cxx
 kvlEstimateAtlasParameters_LDADD=$(LIBS_ITK) \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
-				 libkvlAtlas3DCommon.a \
-				 libkvlAtlas3DGUI.a \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
+				 libkvlAtlas3DCommon.la \
+				 libkvlAtlas3DGUI.la \
 				 -lITKCommon -lITKBasicFilters -lITKAlgorithms -lITKIO -lITKznz \
 				$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
 				$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
@@ -607,7 +604,7 @@
 				$(VTK_SQLITE_LIB) \
 				-lvtkImaging -lvtkFiltering \
 				-lvtkCommon -lvtksys \
-				-lvtkexoIIc -lvtkNetCDF \
+				-lvtkexoIIc -lnetcdf \
 				-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 				-lvtkWidgets -lvtkHybrid \
 				-lvtkIO -lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB) \
@@ -625,10 +622,10 @@
 						kvlImageThresholdingConsole.h
 
 kvlThresholdImage_LDADD=$(LIBS_ITK) \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
-				 libkvlAtlas3DCommon.a \
-				 libkvlAtlas3DGUI.a \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
+				 libkvlAtlas3DCommon.la \
+				 libkvlAtlas3DGUI.la \
 				 -lITKCommon -lITKBasicFilters -lITKAlgorithms -lITKIO -lITKznz \
 				$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
 				$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
@@ -637,7 +634,7 @@
 				$(VTK_SQLITE_LIB) \
 				-lvtkImaging -lvtkFiltering \
 				-lvtkCommon -lvtksys \
-				-lvtkexoIIc -lvtkNetCDF \
+				-lvtkexoIIc -lnetcdf \
 				-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 				-lvtkWidgets -lvtkHybrid \
 				-lvtkIO -lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB) \
@@ -655,10 +652,10 @@
 						kvlImageViewingConsole.h
 
 kvlViewImage_LDADD=$(LIBS_ITK) \
-				 $(top_builddir)/itkio/libitkio.a \
-				 $(top_builddir)/itkutils/libitkutils.a \
-				 libkvlAtlas3DCommon.a \
-				 libkvlAtlas3DGUI.a \
+				 $(top_builddir)/itkio/libitkio.la \
+				 $(top_builddir)/itkutils/libitkutils.la \
+				 libkvlAtlas3DCommon.la \
+				 libkvlAtlas3DGUI.la \
 				 -lITKCommon -lITKBasicFilters -lITKAlgorithms -lITKIO -lITKznz \
 				$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
 				$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
@@ -667,7 +664,7 @@
 				$(VTK_SQLITE_LIB) \
 				-lvtkImaging -lvtkFiltering \
 				-lvtkCommon -lvtksys \
-				-lvtkexoIIc -lvtkNetCDF \
+				-lvtkexoIIc -lnetcdf \
 				-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 				-lvtkWidgets -lvtkHybrid \
 				-lvtkIO -lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB) \
--- a/check_siemens_dir/Makefile.am
+++ b/check_siemens_dir/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = check_siemens_dir
 check_siemens_dir_SOURCES=check_siemens_dir.c
-check_siemens_dir_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+check_siemens_dir_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 check_siemens_dir_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/configure.in
+++ b/configure.in
@@ -332,43 +332,45 @@
 fi
 AC_SUBST(LIB_G2C_A)
 
-# as the law of unintended consequences would have it, when linking
-# against -lblas and -llapack, it uses the shared versions (.so) which
-# expect that shared libg2c exists, which it may not if we are forcing the
-# use of a static libg2c.a, so find the static libblas and liblapack.
-# the fem_elastic build dir uses LIB_BLAS_A and LIB_LAPACK_A
-LIB_BLAS_A=""
-if test -e /usr/local/lib/libblas.a ; then
-  LIB_BLAS_A="/usr/local/lib/libblas.a"
-fi
-if test -e /usr/lib/libblas.a ; then
-  LIB_BLAS_A="/usr/lib/libblas.a"
-fi
-if test -e /usr/lib64/libblas.a ; then
-  LIB_BLAS_A="/usr/lib64/libblas.a"
-fi
-if test "$host" = "powerpc64-suse-linux"; then
-  if test -e /usr/lib/libblas.a ; then
-    LIB_BLAS_A="/usr/lib/libblas.a"
-  fi
-fi
+## as the law of unintended consequences would have it, when linking
+## against -lblas and -llapack, it uses the shared versions (.so) which
+## expect that shared libg2c exists, which it may not if we are forcing the
+## use of a static libg2c.a, so find the static libblas and liblapack.
+## the fem_elastic build dir uses LIB_BLAS_A and LIB_LAPACK_A
+#LIB_BLAS_A=""
+#if test -e /usr/local/lib/libblas.a ; then
+#  LIB_BLAS_A="/usr/local/lib/libblas.a"
+#fi
+#if test -e /usr/lib/libblas.a ; then
+#  LIB_BLAS_A="/usr/lib/libblas.a"
+#fi
+#if test -e /usr/lib64/libblas.a ; then
+#  LIB_BLAS_A="/usr/lib64/libblas.a"
+#fi
+#if test "$host" = "powerpc64-suse-linux"; then
+#  if test -e /usr/lib/libblas.a ; then
+#    LIB_BLAS_A="/usr/lib/libblas.a"
+#  fi
+#fi
+LIB_BLAS_A=-lblas
 AC_SUBST(LIB_BLAS_A)
-
-LIB_LAPACK_A=""
-if test -e /usr/local/lib/liblapack.a ; then
-  LIB_LAPACK_A="/usr/local/lib/liblapack.a"
-fi
-if test -e /usr/lib/liblapack.a ; then
-  LIB_LAPACK_A="/usr/lib/liblapack.a"
-fi
-if test -e /usr/lib64/liblapack.a ; then
-  LIB_LAPACK_A="/usr/lib64/liblapack.a"
-fi
-if test "$host" = "powerpc64-suse-linux"; then
-  if test -e /usr/lib/liblapack.a ; then
-    LIB_LAPACK_A="/usr/lib/liblapack.a"
-  fi
-fi
+#
+#LIB_LAPACK_A=""
+#if test -e /usr/local/lib/liblapack.a ; then
+#  LIB_LAPACK_A="/usr/local/lib/liblapack.a"
+#fi
+#if test -e /usr/lib/liblapack.a ; then
+#  LIB_LAPACK_A="/usr/lib/liblapack.a"
+#fi
+#if test -e /usr/lib64/liblapack.a ; then
+#  LIB_LAPACK_A="/usr/lib64/liblapack.a"
+#fi
+#if test "$host" = "powerpc64-suse-linux"; then
+#  if test -e /usr/lib/liblapack.a ; then
+#    LIB_LAPACK_A="/usr/lib/liblapack.a"
+#  fi
+#fi
+LIB_LAPACK_A=-llapack
 AC_SUBST(LIB_LAPACK_A)
 
 
@@ -1932,21 +1934,21 @@
 fi
 
 # use static lib if found
-if test -e "$ac_tcl_libraries/libjpeg.a"; then
-  LIB_JPEG="$ac_tcl_libraries/libjpeg.a"
-fi
-if test -e "/usr/lib/libjpeg.a"; then
-  LIB_JPEG="/usr/lib/libjpeg.a"
-fi
-if test -e "/usr/lib64/libjpeg.a"; then
-  LIB_JPEG="/usr/lib64/libjpeg.a"
-fi
-if test -e "/usr/pubsw/packages/tiffjpegglut/current/lib/libjpeg.a"; then
-  LIB_JPEG="/usr/pubsw/packages/tiffjpegglut/current/lib/libjpeg.a"
-fi
-if test -e "$ac_jpeg_libraries/libjpeg.a"; then
-  LIB_JPEG="$ac_jpeg_libraries/libjpeg.a"
-fi
+#if test -e "$ac_tcl_libraries/libjpeg.a"; then
+#  LIB_JPEG="$ac_tcl_libraries/libjpeg.a"
+#fi
+#if test -e "/usr/lib/libjpeg.a"; then
+#  LIB_JPEG="/usr/lib/libjpeg.a"
+#fi
+#if test -e "/usr/lib64/libjpeg.a"; then
+#  LIB_JPEG="/usr/lib64/libjpeg.a"
+#fi
+#if test -e "/usr/pubsw/packages/tiffjpegglut/current/lib/libjpeg.a"; then
+#  LIB_JPEG="/usr/pubsw/packages/tiffjpegglut/current/lib/libjpeg.a"
+#fi
+#if test -e "$ac_jpeg_libraries/libjpeg.a"; then
+#  LIB_JPEG="$ac_jpeg_libraries/libjpeg.a"
+#fi
 
 AM_CONDITIONAL(USE_LOCAL_JPEG, test "$ac_jpeg_libraries" = "NO")
 
@@ -2144,7 +2146,7 @@
 
 AC_ARG_WITH(vtk-include,
   [  --with-vtk-include=DIR      root of VTK include directory.],
-  [  vtk_i="$withval/include"
+  [  vtk_i="$withval"
      ac_vtk_includes="$vtk_i"
   ])
 
@@ -2586,34 +2588,37 @@
 
   # these are the minimum ITK libs necessary to support Nrrd IO,
   # notice they are all static (avoiding LD_LIBRARY_PATH usage)
-  LIBS_ITK="$ac_itk_libraries/libITKIO.a \
-  $ac_itk_libraries/libITKAlgorithms.a \
-  $ac_itk_libraries/libITKCommon.a \
-  $ac_itk_libraries/libITKNumerics.a \
-  $ac_itk_libraries/libITKMetaIO.a \
-  $ac_itk_libraries/libITKniftiio.a \
-  $ac_itk_libraries/libITKNrrdIO.a \
-  $ac_itk_libraries/libitkpng.a \
-  $ac_itk_libraries/libitksys.a \
-  $ac_itk_libraries/libitktiff.a \
-  $ac_itk_libraries/libitkv3p_netlib.a \
-  $ac_itk_libraries/libitkzlib.a \
-  $ac_itk_libraries/libitkgdcm.a \
-  $ac_itk_libraries/libitkopenjpeg.a \
-  $ac_itk_libraries/libitkjpeg8.a \
-  $ac_itk_libraries/libitkjpeg12.a \
-  $ac_itk_libraries/libitkjpeg16.a \
-  $ac_itk_libraries/libITKDICOMParser.a"
+  #LIBS_ITK="$ac_itk_libraries/libITKIO.a \
+  #$ac_itk_libraries/libITKAlgorithms.a \
+  #$ac_itk_libraries/libITKCommon.a \
+  #$ac_itk_libraries/libITKNumerics.a \
+  #$ac_itk_libraries/libITKMetaIO.a \
+  #$ac_itk_libraries/libITKniftiio.a \
+  #$ac_itk_libraries/libITKNrrdIO.a \
+  #$ac_itk_libraries/libitkpng.a \
+  #$ac_itk_libraries/libitksys.a \
+  #$ac_itk_libraries/libitktiff.a \
+  #$ac_itk_libraries/libitkv3p_netlib.a \
+  #$ac_itk_libraries/libitkzlib.a \
+  #$ac_itk_libraries/libitkgdcm.a \
+  #$ac_itk_libraries/libitkopenjpeg.a \
+  #$ac_itk_libraries/libitkjpeg8.a \
+  #$ac_itk_libraries/libitkjpeg12.a \
+  #$ac_itk_libraries/libitkjpeg16.a \
+  #$ac_itk_libraries/libITKDICOMParser.a"
+  LIBS_ITK="-lITKIO -lITKAlgorithms -lITKCommon -lITKNumerics -lITKMetaIO \
+            -lITKNrrdIO -litksys -lITKDICOMParser"
+
 
   # ITK v3.16.0 needs libuuid for function `gdcm::Util::GenerateUUID'
-  if test -e /usr/lib/libuuid.a ; then
-     LIB_UUID_A="/usr/lib/libuuid.a"
-     AC_SUBST(LIB_UUID_A)
-  fi
-  if test -e /usr/lib64/libuuid.a ; then
-     LIB_UUID_A="/usr/lib64/libuuid.a"
+  if test -e /usr/lib/libuuid.so ; then
+     LIB_UUID_A="-luuid"
      AC_SUBST(LIB_UUID_A)
   fi
+  #if test -e /usr/lib64/libuuid.a ; then
+  #   LIB_UUID_A="/usr/lib64/libuuid.a"
+  #   AC_SUBST(LIB_UUID_A)
+  #fi
   LIBS_ITK="$LIBS_ITK $LIB_UUID_A"
 else
   AC_MSG_RESULT([Not building ITK apps.])
@@ -2654,7 +2659,7 @@
 
 if test ! "$ac_gl_includes" = "NO"; then
   AC_MSG_RESULT(gl directory is $withval)
-  gl_cflags=-I$ac_gl_includes
+  gl_cflags=-I$ac_gl_includes/GL
 else
   AC_MSG_RESULT(OpenGL directory is not supplied)
 fi
@@ -2753,14 +2758,13 @@
 
 # stupid circular dependency on iopen swapInt etc.
 LIBS_MGH="\
-  utils/libutils.a \
-  fsgdf/libfsgdf.a \
-  rgb/librgb.a \
-  unix/libunix.a \
-  dicom/libdicom.a \
-  hipsstubs/libhipsstubs.a \
-  log/liblog.a \
-  xml2/libxml2.a"
+  fsgdf/libfsgdf.la \
+  rgb/librgb.la \
+  unix/libunix.la \
+  dicom/libdicom.la \
+  hipsstubs/libhipsstubs.la \
+  log/liblog.la"
+DLIBS_MGH="-L\$(top_builddir)/utils -lutils -lxml2"
 
 # use local libjpeg if --with-jpeg-dir not used:
 if test "$ac_jpeg_libraries" = "NO"; then
@@ -2782,6 +2786,7 @@
 LIBS_CUDA_MGH=`echo ${LIBS_MGH} | sed 's/libutils/libutils_cuda/g'`
 
 AC_SUBST(LIBS_MGH)
+AC_SUBST(DLIBS_MGH)
 AC_SUBST(LIBS_CUDA_MGH)
 AC_SUBST(LIB_JPEG)
 AC_SUBST(LIB_TIFF)
@@ -3131,6 +3136,9 @@
 
   ##################### Tix
   LIBS="$X_LIBS $LIB_TK $LIB_TCL $LIBS"
+  AC_CHECK_LIB([Tix8.4.3], [Tix_Init],
+  [LIB_TIX=-lTix8.4.3],
+  [
   # check Tix8.4.2 first, as that is known to work best with tcl/tk 8.5
   AC_CHECK_LIB([Tix8.4.2], [Tix_Init],
   [LIB_TIX=-lTix8.4.2],
@@ -3162,6 +3170,7 @@
         ])
       ])
     ])
+  ])
   AC_SUBST(LIB_TIX)
 
   ######## BLT (we cannot build BLT in Aqua) must use X11
--- a/connectgraph/Makefile.am
+++ b/connectgraph/Makefile.am
@@ -37,7 +37,7 @@
 	MyCmdLineParser.cpp \
 	MyCmdLineParser.h
 					
-connectgraph_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+connectgraph_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 connectgraph_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -62,7 +62,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/cudatest/Makefile.am
+++ b/cudatest/Makefile.am
@@ -59,13 +59,13 @@
 
 
 gcamCompare_SOURCES = gcamCompare.cpp kahan.hpp
-gcamCompare_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcamCompare_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcamCompare_LDFLAGS=$(OS_LDFLAGS)
 
 # --
 
 gcam_write_test_SOURCES = gcam_write_test.cpp
-gcam_write_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_write_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_write_test_LDFLAGS=$(OS_LDFLAGS)
 
 gcam_write_test_cuda_SOURCES = gcam_write_test.cpp
@@ -81,13 +81,13 @@
 # --
 
 mri2nc_SOURCES = mri2nc.cpp
-mri2nc_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+mri2nc_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 mri2nc_LDFLAGS=$(OS_LDFLAGS)
 
 # --
 
 conv1d_test_SOURCES = conv1d_test.cpp
-conv1d_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+conv1d_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 conv1d_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -103,7 +103,7 @@
 # --
 
 convgaussian_test_SOURCES = convgaussian_test.cpp
-convgaussian_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+convgaussian_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 convgaussian_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -119,7 +119,7 @@
 # --
 
 gcam_cmp_test_SOURCES = gcam_cmp_test.cpp
-gcam_cmp_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_cmp_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_cmp_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -135,7 +135,7 @@
 # --
 
 gcam_lle_test_SOURCES = gcam_lle_test.cpp
-gcam_lle_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_lle_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_lle_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -151,7 +151,7 @@
 # --
 
 gcam_jacobenergy_test_SOURCES = gcam_jacobenergy_test.cpp
-gcam_jacobenergy_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_jacobenergy_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_jacobenergy_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -167,7 +167,7 @@
 # --
 
 gcam_labelenergy_test_SOURCES = gcam_labelenergy_test.cpp
-gcam_labelenergy_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_labelenergy_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_labelenergy_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -184,7 +184,7 @@
 # --
 
 gcam_smoothnessenergy_test_SOURCES = gcam_smoothnessenergy_test.cpp
-gcam_smoothnessenergy_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_smoothnessenergy_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_smoothnessenergy_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -201,7 +201,7 @@
 # --
 
 gcam_clear_test_SOURCES = gcam_clear_test.cpp
-gcam_clear_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_clear_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_clear_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -218,7 +218,7 @@
 # --
 
 gcam_applygradient_test_SOURCES = gcam_applygradient_test.cpp
-gcam_applygradient_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_applygradient_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_applygradient_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -234,7 +234,7 @@
 # --
 
 gcam_undogradient_test_SOURCES = gcam_undogradient_test.cpp
-gcam_undogradient_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_undogradient_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_undogradient_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -250,7 +250,7 @@
 # --
 
 meanfilter_test_SOURCES=meanfilter_test.cpp
-meanfilter_test_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+meanfilter_test_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 meanfilter_test_LDFLAGS=$(OS_LDFLAGS)
 
 meanfilter_test_cuda_SOURCES = meanfilter_test.cpp
@@ -266,7 +266,7 @@
 # --
 
 gcam_smoothnessterm_test_SOURCES = gcam_smoothnessterm_test.cpp
-gcam_smoothnessterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_smoothnessterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_smoothnessterm_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -282,7 +282,7 @@
 # --
 
 gcam_jacobterm_test_SOURCES = gcam_jacobterm_test.cpp
-gcam_jacobterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_jacobterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_jacobterm_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -298,7 +298,7 @@
 # --
 
 gcam_llterm_test_SOURCES = gcam_llterm_test.cpp
-gcam_llterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_llterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_llterm_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -314,7 +314,7 @@
 # --
 
 gcam_labelterm_final_test_SOURCES = gcam_labelterm_final_test.cpp
-gcam_labelterm_final_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_labelterm_final_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_labelterm_final_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -331,7 +331,7 @@
 # --
 
 gcam_labelterm_postantconsist_test_SOURCES = gcam_labelterm_postantconsist_test.cpp
-gcam_labelterm_postantconsist_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_labelterm_postantconsist_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_labelterm_postantconsist_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -347,7 +347,7 @@
 # --
 
 gcam_labelterm_copydeltas_test_SOURCES = gcam_labelterm_copydeltas_test.cpp
-gcam_labelterm_copydeltas_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_labelterm_copydeltas_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_labelterm_copydeltas_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -364,7 +364,7 @@
 # --
 
 gcam_labelterm_removeoutliers_test_SOURCES = gcam_labelterm_removeoutliers_test.cpp
-gcam_labelterm_removeoutliers_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_labelterm_removeoutliers_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_labelterm_removeoutliers_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -381,7 +381,7 @@
 # --
 
 gcam_labelterm_mainloop_test_SOURCES = gcam_labelterm_mainloop_test.cpp
-gcam_labelterm_mainloop_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_labelterm_mainloop_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_labelterm_mainloop_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -399,7 +399,7 @@
 # --
 
 gcam_labelterm_test_SOURCES = gcam_labelterm_test.cpp
-gcam_labelterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_labelterm_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_labelterm_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -417,7 +417,7 @@
 # --
 
 gcam_addstatus_test_SOURCES = gcam_addstatus_test.cpp
-gcam_addstatus_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_addstatus_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_addstatus_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -434,7 +434,7 @@
 # --
 
 gcam_removestatus_test_SOURCES = gcam_removestatus_test.cpp
-gcam_removestatus_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_removestatus_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_removestatus_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -450,7 +450,7 @@
 # --
 
 gcam_smoothgradient_test_SOURCES = gcam_smoothgradient_test.cpp
-gcam_smoothgradient_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_smoothgradient_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_smoothgradient_test_LDFLAGS=$(OS_LDFLAGS)
 
 
@@ -466,7 +466,7 @@
 # --
 
 gcam_removesingularities_test_SOURCES = gcam_removesingularities_test.cpp
-gcam_removesingularities_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gcam_removesingularities_test_LDADD=  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gcam_removesingularities_test_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/cudatest/gcatest/Makefile.am
+++ b/cudatest/gcatest/Makefile.am
@@ -25,7 +25,7 @@
 bin_PROGRAMS = gca_read_test
 
 gca_read_test_SOURCES = gca_read_test.cpp
-gca_read_test_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+gca_read_test_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 gca_read_test_LDFLAGS = $(OS_LDFLAGS)
 
 endif
--- a/cudatest/mrilabeltest/Makefile.am
+++ b/cudatest/mrilabeltest/Makefile.am
@@ -30,7 +30,7 @@
 # ---
 
 mriMarkLabelBorderVoxelTest_SOURCES = mriMarkLabelBorderVoxelTest.cpp
-mriMarkLabelBorderVoxelTest_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+mriMarkLabelBorderVoxelTest_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 mriMarkLabelBorderVoxelTest_LDFLAGS = $(OS_LDFLAGS)
 
 mriMarkLabelBorderVoxelTest_cuda_SOURCES = mriMarkLabelBorderVoxelTest.cpp
@@ -46,7 +46,7 @@
 # ---
 
 mriVoxInLabelPartialVolumeTest_SOURCES = mriVoxInLabelPartialVolumeTest.cpp
-mriVoxInLabelPartialVolumeTest_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(BOOST_PO_LIB)
+mriVoxInLabelPartialVolumeTest_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(BOOST_PO_LIB)
 mriVoxInLabelPartialVolumeTest_LDFLAGS = $(OS_LDFLAGS)
 
 mriVoxInLabelPartialVolumeTest_cuda_SOURCES = mriVoxInLabelPartialVolumeTest.cpp
--- a/dmri_poistats/Makefile.am
+++ b/dmri_poistats/Makefile.am
@@ -65,13 +65,13 @@
   $(IO_SRCS) \
   dmri_poistats.cxx 
 dmri_poistats_LDADD = $(LIBS_ITK) \
-	$(top_builddir)/itkio/libitkio.a \
-	$(top_builddir)/itkutils/libitkutils.a \
-	-lITKBasicFilters -litkgdcm -litkpng -litktiff -lITKSpatialObject \
+	$(top_builddir)/itkio/libitkio.la \
+	$(top_builddir)/itkutils/libitkutils.la \
+	-lITKBasicFilters -lITKSpatialObject \
 	-lITKNumerics -litkvnl_inst -litkvnl_algo -litkv3p_netlib \
 	-litkvnl -litkvcl \
-	-lITKMetaIO -litksys -lITKEXPAT -lITKniftiio -lITKznz -litkzlib \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH) )
+	-lITKMetaIO -litksys -lITKEXPAT -lITKniftiio -lITKznz \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH) ) $(DLIBS_MGH)
 dmri_poistats_LDFLAGS = $(OS_LDFLAGS)
 dmri_poistats_CXXFLAGS = 
 
@@ -81,20 +81,20 @@
   $(UTILS_SRCS) \
   dmri_initialize_path.cxx 
 dmri_initialize_path_LDADD = $(LIBS_ITK) \
-	$(top_builddir)/itkutils/libitkutils.a \
-	-lITKBasicFilters -litkgdcm -litkpng -litktiff -lITKSpatialObject \
+	$(top_builddir)/itkutils/libitkutils.la \
+	-lITKBasicFilters -lITKSpatialObject \
 	-lITKNumerics -litkvnl_inst -litkvnl_algo -litkv3p_netlib \
 	-litkvnl -litkvcl \
-	-lITKMetaIO -litksys -lITKEXPAT -lITKniftiio -lITKznz -litkzlib \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH) )
+	-lITKMetaIO -litksys -lITKEXPAT -lITKniftiio -lITKznz \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH) ) $(DLIBS_MGH)
 dmri_initialize_path_LDFLAGS = $(OS_LDFLAGS)
 dmri_initialize_path_CXXFLAGS = 
 
 # mask path
 dmri_mask_SOURCES = \
   dmri_mask.cxx 
-dmri_mask_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH) ) \
-	$(top_builddir)/itkutils/libitkutils.a
+dmri_mask_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH) ) $(DLIBS_MGH) \
+	$(top_builddir)/itkutils/libitkutils.la
 dmri_mask_LDFLAGS = $(OS_LDFLAGS)
 dmri_mask_CXXFLAGS = 
 
@@ -130,9 +130,9 @@
 
 TestPoistatsReplica_CXXFLAGS=$(CPPUNIT_CFLAGS) -Wno-non-virtual-dtor
 
-TestPoistatsReplica_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/itkio/libitkio.a \
-	$(top_builddir)/itkutils/libitkutils.a \
+TestPoistatsReplica_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/itkio/libitkio.la \
+	$(top_builddir)/itkutils/libitkutils.la \
 	$(CPPUNIT_LIBS) -lcppunit -ldl 	\
 	-lITKBasicFilters -litkgdcm -litkpng -litktiff -lITKSpatialObject \
 	-lITKNumerics -litkvnl_inst -litkvnl_algo -litkv3p_netlib \
@@ -149,9 +149,9 @@
 
 TestPoistatsReplicas_CXXFLAGS=$(CPPUNIT_CFLAGS) -Wno-non-virtual-dtor
 
-TestPoistatsReplicas_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/itkio/libitkio.a \
-	$(top_builddir)/itkutils/libitkutils.a \
+TestPoistatsReplicas_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/itkio/libitkio.la \
+	$(top_builddir)/itkutils/libitkutils.la \
 	$(CPPUNIT_LIBS) -lcppunit -ldl 	\
 	-lITKBasicFilters -litkgdcm -litkpng -litktiff -lITKSpatialObject \
 	-lITKNumerics -litkvnl_inst -litkvnl_algo -litkv3p_netlib \
@@ -170,14 +170,14 @@
 TestPoistats_CXXFLAGS=$(CPPUNIT_CFLAGS) -Wno-non-virtual-dtor
 
 TestPoistats_LDADD= \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/itkio/libitkio.a \
-	$(top_builddir)/itkutils/libitkutils.a \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/itkio/libitkio.la \
+	$(top_builddir)/itkutils/libitkutils.la \
 	$(LIBS_ITK) \
 	$(CPPUNIT_LIBS)	-lcppunit \
-	-lITKBasicFilters -litkgdcm -litkpng -litktiff -lITKSpatialObject \
+	-lITKBasicFilters -lITKSpatialObject \
 	-lITKNumerics -litkvnl_inst -litkvnl_algo -litkv3p_netlib -litkvnl -litkvcl \
-	-lITKIO 	-lITKMetaIO -litksys -lITKEXPAT -lITKniftiio -lITKznz -litkzlib
+	-lITKIO 	-lITKMetaIO -litksys -lITKEXPAT -lITKniftiio -lITKznz
 
 TestPoistats_LDFLAGS = $(OS_LDFLAGS)
 endif
--- a/dmri_tensoreig/Makefile.am
+++ b/dmri_tensoreig/Makefile.am
@@ -4,7 +4,7 @@
 
 bin_PROGRAMS = dmri_tensoreig
 dmri_tensoreig_SOURCES=dmri_tensoreig.c
-dmri_tensoreig_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+dmri_tensoreig_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 dmri_tensoreig_LDFLAGS=$(OS_LDFLAGS)
 
 EXTRA_DIST=do.sh
--- a/dngtester/Makefile.am
+++ b/dngtester/Makefile.am
@@ -7,8 +7,8 @@
 
 bin_PROGRAMS = dngtester
 dngtester_SOURCES=dngtester.c
-dngtester_LDADD= $(top_builddir)/fsgdf/libfsgdf.a \
-  $(addprefix $(top_builddir)/, $(LIBS_MGH))
+dngtester_LDADD= $(top_builddir)/fsgdf/libfsgdf.la \
+  $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 dngtester_LDFLAGS=$(OS_LDFLAGS)
 
 install:
--- a/dummy/Makefile.am
+++ b/dummy/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = dummy
 dummy_SOURCES=dummy.c
-dummy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+dummy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 dummy_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/fem_elastic/Makefile.am
+++ b/fem_elastic/Makefile.am
@@ -19,79 +19,92 @@
 AM_LDFLAGS=$(OS_LDFLAGS) -z muldefs
 endif
 
-common3d_SOURCES=\
+common3d_SOURCES=
+
+dlibcommon3d_SOURCES=\
 	fem_3d.cpp fem_3d.h solver.h \
 	misc.h mesh.h toctree.hpp node.h simple_timer.h tag_fio.h \
 	coords.h material.h element.h gmpError.h streamIoMisc.h stl_utils.hpp \
 	small_matrix.cpp small_matrix.h \
 	morph.cpp morph.h \
-	morph_utils.cpp morph_utils.h
+	morph_utils.cpp morph_utils.h \
+	misc_maths.cpp misc_maths.h \
+	transformUtils.cpp transformUtils.h \
+	surf_utils.cpp surf_utils.h \
+	ZlibStringCompressor.cpp ZlibStringCompressor.h
 
 bin_PROGRAMS=createMorph applyMorph surf2vol exportGcam
 
 createMorph_SOURCES=\
 	$(common3d_SOURCES) \
 	fcreateMorph.cpp \
-	misc_maths.cpp misc_maths.h \
-	transformUtils.cpp transformUtils.h \
-	surf_utils.cpp surf_utils.h \
-	ZlibStringCompressor.cpp ZlibStringCompressor.h
+	misc_maths.h \
+	transformUtils.h \
+	surf_utils.h \
+	ZlibStringCompressor.h
 
 createMorph_LDADD=\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/tetgen/libtetgen.a $(BOOST_PO_LIB)
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/tetgen/libtetgen.la $(BOOST_PO_LIB) \
+	 libfem_elastic.la
 
 applyMorph_SOURCES=\
 	$(common3d_SOURCES) \
 	fapplyMorph.cpp \
-	misc_maths.cpp misc_maths.h \
-	transformUtils.cpp transformUtils.h \
-	surf_utils.cpp surf_utils.h \
-	ZlibStringCompressor.cpp ZlibStringCompressor.h
+	misc_maths.h \
+	transformUtils.h \
+	surf_utils.h \
+	ZlibStringCompressor.h
 
 applyMorph_LDADD=\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/tetgen/libtetgen.a $(BOOST_PO_LIB)
+	$(addprefix $(top_builddir)/, $(LIBS_MGH))  $(DLIBS_MGH) \
+	$(top_builddir)/tetgen/libtetgen.la $(BOOST_PO_LIB) \
+	 libfem_elastic.la
+
+# Workaround for fem_elastic/Makefile.am: object `fcreateMorph.$(OBJEXT)' created both with libtool and without
+# per http://www.gnu.org/software/hello/manual/automake/Objects-created-both-with-libtool-and-without.html
+# And since it is not just the 'main()' so it should be safer to just allow those two objects to duplicate
+createMorph_CPPFLAGS = $(AM_CFLAGS)
+applyMorph_CPPFLAGS = $(AM_CFLAGS)
 
 surf2vol_SOURCES=\
 	$(common3d_SOURCES) \
 	fsurf2vol.cpp cstats.h surf_types.h \
 	surf_powell.cpp surf_powell.h \
 	surf_energy.cpp surf_energy.h \
-	misc_maths.cpp \
-	transformUtils.cpp \
-	surf_utils.cpp \
-	ZlibStringCompressor.cpp \
 	pbCluster_mesh_crop.cpp pbCluster_mesh_crop.h mesh_bfs.h \
 	untangler.cpp untangler.h pbmesh_crop.h
 
 if HAVE_MAC_OSX
 surf2vol_LDADD=\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/tetgen/libtetgen.a \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/tetgen/libtetgen.la \
 	$(PETSC_LIBS) -lpetscts -lpetscsnes -lpetscksp -lpetscdm -lpetscmat \
 	-lpetscvec -lpetsc -lpmpich -lmpich -llmpe -lmpe -lflapack -lfblas \
-	$(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A)
+	$(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A) \
+	libfem_elastic.la
 else
 surf2vol_LDADD=\
-    $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-    $(top_builddir)/tetgen/libtetgen.a \
+    $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+    $(top_builddir)/tetgen/libtetgen.la \
     $(PETSC_LIBS) -lpetscts -lpetscsnes -lpetscksp -lpetscdm -lpetscmat \
-    -lpetscvec -lpetsc -lmpich  $(LIB_GFORTRAN) $(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A) $(LIB_GFORTRAN)
+    -lpetscvec -lpetsc -lmpich  $(LIB_GFORTRAN) $(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A) $(LIB_GFORTRAN) \
+    libfem_elastic.la
 endif
 
 exportGcam_SOURCES=\
 	$(common3d_SOURCES) \
 	exportGcam.cpp \
-	ZlibStringCompressor.cpp ZlibStringCompressor.h
+	ZlibStringCompressor.h
 
 exportGcam_LDADD=\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/tetgen/libtetgen.a $(BOOST_PO_LIB)
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/tetgen/libtetgen.la $(BOOST_PO_LIB) \
+	libfem_elastic.la
 
 # build library...
-noinst_LIBRARIES= libfem_elastic.a
-libfem_elastic_a_SOURCES = $(createMorph_SOURCES) $(applyMorph_SOURCES)
+lib_LTLIBRARIES = libfem_elastic.la
+libfem_elastic_la_SOURCES = $(dlibcommon3d_SOURCES) $(createMorph_SOURCES) $(applyMorph_SOURCES)
 
 endif
 endif
--- a/freeview/Makefile.am
+++ b/freeview/Makefile.am
@@ -392,9 +392,9 @@
 freeview_LDFLAGS	= $(QT_LDFLAGS) $(OS_LDFLAGS) \
 	-framework Cocoa -framework IOKit
 freeview_LDADD		= $(QT_LIBS)	\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
 	$(VTK_COCOA_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
 	$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	$(VTK_TIFF_LIB) $(VTK_JPEG_LIB) \
@@ -402,7 +402,7 @@
 	$(VTK_SQLITE_LIB) \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys -lvtkGenericFiltering \
-	-lvtkexoIIc -lvtkNetCDF \
+	-lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lvtkWidgets -lvtkHybrid \
 	-lvtkIO	-lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB)
@@ -455,12 +455,12 @@
 	$(VXL_CFLAGS)
 
 freeview_CXXFLAGS = $(QT_CXXFLAGS) $(AM_CXXFLAGS)
-freeview_CPPFLAGS = $(QT_CPPFLAGS) $(AM_CPPFLAGS)
+freeview_CPPFLAGS = $(QT_CPPFLAGS) $(AM_CPPFLAGS) -I/usr/include/qt4 -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui
 freeview_LDFLAGS	= $(QT_LDFLAGS) $(OS_LDFLAGS)
 freeview_LDADD		= $(QT_LIBS)	\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
 	$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	$(VTK_TIFF_LIB) $(VTK_JPEG_LIB) \
@@ -468,10 +468,10 @@
 	$(VTK_SQLITE_LIB) \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys -lvtkGenericFiltering \
-	-lvtkexoIIc -lvtkNetCDF \
+	-lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lvtkWidgets -lvtkHybrid \
-	-lvtkIO	-lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB)
+	-lvtkIO	-lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB) $(X_LIBS)
 
 # put a wrapper around the bin, used to setup tcltktixblt,vtk enviro vars
 # and if the OS is MACOSX have a different install-hook to create a bundle
--- a/freeview/freeview.pro
+++ b/freeview/freeview.pro
@@ -269,7 +269,7 @@
 LIBS += \
     -lvtkverdict -lvtkGraphics -lvtkmetaio -lvtkpng -lvtkzlib \
     -lvtksqlite -lvtkImaging -lvtkFiltering -lvtkCommon -lvtksys \
-    -lvtkGenericFiltering -lvtkexoIIc -lvtkNetCDF -lvtkVolumeRendering \
+    -lvtkGenericFiltering -lvtkexoIIc -lnetcdf -lvtkVolumeRendering \
     -lvtkRendering -lvtkftgl -lvtkWidgets -lvtkHybrid -lvtkIO -lvtkDICOMParser
 
 QMAKE_CXXFLAGS += -Wno-deprecated -DUNICODE -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES \
@@ -349,7 +349,7 @@
 LIBS -= \
     -lvtkverdict -lvtkGraphics -lvtkmetaio -lvtkpng -lvtkzlib \
     -lvtksqlite -lvtkImaging -lvtkFiltering -lvtkCommon -lvtksys \
-    -lvtkGenericFiltering -lvtkexoIIc -lvtkNetCDF -lvtkVolumeRendering \
+    -lvtkGenericFiltering -lvtkexoIIc -lnetcdf -lvtkVolumeRendering \
     -lvtkRendering -lvtkftgl -lvtkWidgets -lvtkHybrid -lvtkIO -lvtkDICOMParser
 
 LIBS += -lvtkHybrid -lvtkVolumeRendering -lvtkRendering -lvtkIO \
--- a/freeview_wx/Makefile.am
+++ b/freeview_wx/Makefile.am
@@ -408,9 +408,9 @@
 # put a wrapper around the bin, used to setup tcltktixblt,vtk,kww enviro vars
 # and if the OS is MACOSX have a different install-hook to create a bundle
 freeview_wx_LDADD=\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
 	$(VTK_CARBON_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
 	$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	$(VTK_TIFF_LIB) $(VTK_JPEG_LIB) \
@@ -418,7 +418,7 @@
 	$(VTK_SQLITE_LIB) \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys -lvtkGenericFiltering \
-	-lvtkexoIIc -lvtkNetCDF \
+	-lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lvtkWidgets -lvtkHybrid \
 	-lvtkIO	-lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB) \
@@ -465,7 +465,7 @@
 freeview_wx_LDFLAGS=$(OS_LDFLAGS) $(LDFLAGS_TCL)
 
 freeview_wx_LDADD=\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(top_builddir)/vtkfsio/libvtkfsio.a \
 	$(top_builddir)/vtkutils/libvtkutils.a \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
@@ -475,7 +475,7 @@
 	$(VTK_SQLITE_LIB) \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys -lvtkGenericFiltering \
-	-lvtkexoIIc -lvtkNetCDF \
+	-lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lvtkWidgets -lvtkHybrid \
 	-lvtkIO	-lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB) \
--- a/fsgdf/Makefile.am
+++ b/fsgdf/Makefile.am
@@ -17,11 +17,11 @@
 endif
 AM_LDFLAGS=
 
-noinst_LIBRARIES= libfsgdf.a
+lib_LTLIBRARIES= libfsgdf.la
 if ENABLE_TCLTK_APPS
-libfsgdf_a_SOURCES = fsgdf.c fsgdf_wrap.c FsgdfPlot.cxx
+libfsgdf_la_SOURCES = fsgdf.c fsgdf_wrap.c FsgdfPlot.cxx
 else
-libfsgdf_a_SOURCES = fsgdf.c fsgdf_wrap.c
+libfsgdf_la_SOURCES = fsgdf.c fsgdf_wrap.c
 endif
 
 if ENABLE_TCLTK_APPS
@@ -36,9 +36,9 @@
 					$(top_builddir)/fsgdf/; fi;
 
 check_PROGRAMS=foo test
-test_SOURCES=test.c fsgdf_wrap.c
+test_SOURCES=test.c
 test_LDFLAGS=$(LDFLAGS_TCL)
-test_LDADD=libfsgdf.a $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(LIBS_TCL)
+test_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(LIBS_TCL)
 TESTS=setup_test_data test
 endif
 
--- a/fslutils/Makefile.am
+++ b/fslutils/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = fsl_label2voxel
 fsl_label2voxel_SOURCES=fsl_label2voxel.cpp
-fsl_label2voxel_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+fsl_label2voxel_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 fsl_label2voxel_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/hiam_make_surfaces/Makefile.am
+++ b/hiam_make_surfaces/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = hiam_make_surfaces
 hiam_make_surfaces_SOURCES=hiam_make_surfaces.c
-hiam_make_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+hiam_make_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 hiam_make_surfaces_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS= myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/hiam_make_template/Makefile.am
+++ b/hiam_make_template/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = hiam_make_template
 hiam_make_template_SOURCES=hiam_make_template.c
-hiam_make_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+hiam_make_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 hiam_make_template_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/hiam_register/Makefile.am
+++ b/hiam_register/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = hiam_register
 hiam_register_SOURCES=hiam_register.c
-hiam_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+hiam_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 hiam_register_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/histo_compute_joint_density/Makefile.am
+++ b/histo_compute_joint_density/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS=histo_compute_joint_density
 histo_compute_joint_density_SOURCES=histo_compute_joint_density.c
-histo_compute_joint_density_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+histo_compute_joint_density_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 histo_compute_joint_density_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/histo_fix_topology/Makefile.am
+++ b/histo_fix_topology/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = histo_fix_topology
 histo_fix_topology_SOURCES=histo_fix_topology.c
-histo_fix_topology_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+histo_fix_topology_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 histo_fix_topology_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/histo_register_block/Makefile.am
+++ b/histo_register_block/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = histo_register_block
 histo_register_block_SOURCES=histo_register_block.c
-histo_register_block_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+histo_register_block_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 histo_register_block_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/histo_segment/Makefile.am
+++ b/histo_segment/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = histo_segment
 histo_segment_SOURCES=histo_segment.c
-histo_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+histo_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 histo_segment_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/histo_synthesize/Makefile.am
+++ b/histo_synthesize/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = histo_synthesize
 histo_synthesize_SOURCES=histo_synthesize.c
-histo_synthesize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+histo_synthesize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 histo_synthesize_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/label2flat/Makefile.am
+++ b/label2flat/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = label2flat
 label2flat_SOURCES=label2flat.c
-label2flat_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+label2flat_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 label2flat_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/label2patch/Makefile.am
+++ b/label2patch/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = label2patch
 label2patch_SOURCES=label2patch.c
-label2patch_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+label2patch_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 label2patch_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/label_area/Makefile.am
+++ b/label_area/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = label_area
 label_area_SOURCES=label_area.c
-label_area_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+label_area_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 label_area_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS= myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/label_border/Makefile.am
+++ b/label_border/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = label_border
 label_border_SOURCES=label_border.c
-label_border_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+label_border_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 label_border_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS= myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mkxsubjreg/Makefile.am
+++ b/mkxsubjreg/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mkxsubjreg
 mkxsubjreg_SOURCES=mkxsubjreg.c
-mkxsubjreg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mkxsubjreg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mkxsubjreg_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_add_xform_to_header/Makefile.am
+++ b/mri_add_xform_to_header/Makefile.am
@@ -10,8 +10,8 @@
 bin_PROGRAMS = mri_add_xform_to_header
 
 mri_add_xform_to_header_SOURCES=mri_add_xform_to_header.c
-mri_add_xform_to_header_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
-mri_add_xform_to_header_LDFLAGS=$(OS_LDFLAGS)
+mri_add_xform_to_header_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
+mri_add_xform_to_header_LDFLAGS=$(OS_LDFLAGS) -lxml2
 
 foodir=$(prefix)/docs/xml
 foo_DATA=mri_add_xform_to_header.help.xml
--- a/mri_and/Makefile.am
+++ b/mri_and/Makefile.am
@@ -8,11 +8,11 @@
 bin_PROGRAMS = mri_and mri_or
 
 mri_and_SOURCES=mri_and.c
-mri_and_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_and_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_and_LDFLAGS=$(OS_LDFLAGS)
 
 mri_or_SOURCES=mri_or.c
-mri_or_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_or_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_or_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_annotation2label/Makefile.am
+++ b/mri_annotation2label/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_annotation2label
 mri_annotation2label_SOURCES=mri_annotation2label.c
-mri_annotation2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_annotation2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_annotation2label_LDFLAGS=$(OS_LDFLAGS)
 
 EXTRA_DIST=runit
--- a/mri_aparc2aseg/Makefile.am
+++ b/mri_aparc2aseg/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_aparc2aseg
 
 mri_aparc2aseg_SOURCES=mri_aparc2aseg.c mri_aparc2aseg.help.xml.h
-mri_aparc2aseg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_aparc2aseg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) -lxml2
 mri_aparc2aseg_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_aparc2wmseg/Makefile.am
+++ b/mri_aparc2wmseg/Makefile.am
@@ -28,7 +28,7 @@
 
 bin_PROGRAMS = mri_aparc2wmseg
 mri_aparc2wmseg_SOURCES=mri_aparc2wmseg.c
-mri_aparc2wmseg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_aparc2wmseg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_aparc2wmseg_LDFLAGS=$(OS_LDFLAGS)
 # to --------------------------------------------------
 #
--- a/mri_apply_inu_correction/Makefile.am
+++ b/mri_apply_inu_correction/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_apply_inu_correction
 mri_apply_inu_correction_SOURCES=mri_apply_inu_correction.c
-mri_apply_inu_correction_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_apply_inu_correction_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_apply_inu_correction_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_aseg_edit_reclassify/Makefile.am
+++ b/mri_aseg_edit_reclassify/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_aseg_edit_reclassify
 mri_aseg_edit_reclassify_SOURCES=mri_aseg_edit_reclassify.c
-mri_aseg_edit_reclassify_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mri_aseg_edit_reclassify_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	../svm-lib/libsvm.a
 mri_aseg_edit_reclassify_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mri_aseg_edit_train/Makefile.am
+++ b/mri_aseg_edit_train/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_aseg_edit_train
 mri_aseg_edit_train_SOURCES=mri_aseg_edit_train.c
-mri_aseg_edit_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mri_aseg_edit_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	../svm-lib/libsvm.a
 mri_aseg_edit_train_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mri_auto_fill/Makefile.am
+++ b/mri_auto_fill/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_auto_fill
 mri_auto_fill_SOURCES=mri_auto_fill.c
-mri_auto_fill_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_auto_fill_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_auto_fill_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_average/Makefile.am
+++ b/mri_average/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_average
 mri_average_SOURCES=mri_average.c
-mri_average_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_average_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_average_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_bc_sc_bias_correct/Makefile.am
+++ b/mri_bc_sc_bias_correct/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_bc_sc_bias_correct
 mri_bc_sc_bias_correct_SOURCES=mri_bc_sc_bias_correct.c
-mri_bc_sc_bias_correct_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_bc_sc_bias_correct_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_bc_sc_bias_correct_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_bias/Makefile.am
+++ b/mri_bias/Makefile.am
@@ -8,16 +8,16 @@
 bin_PROGRAMS = mri_compute_bias mri_apply_bias
 
 mri_apply_bias_SOURCES=mri_apply_bias.c
-mri_apply_bias_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_apply_bias_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_apply_bias_LDFLAGS=$(OS_LDFLAGS)
 
 mri_compute_bias_SOURCES=mri_compute_bias.c
-mri_compute_bias_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compute_bias_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compute_bias_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_binarize/Makefile.am
+++ b/mri_binarize/Makefile.am
@@ -31,7 +31,7 @@
 
 bin_PROGRAMS = mri_binarize
 mri_binarize_SOURCES=mri_binarize.c
-mri_binarize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_binarize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_binarize_LDFLAGS=$(OS_LDFLAGS)
 # to --------------------------------------------------
 #
--- a/mri_build_priors/Makefile.am
+++ b/mri_build_priors/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_build_priors
 mri_build_priors_SOURCES=mri_build_priors.c
-mri_build_priors_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_build_priors_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_build_priors_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_ca_label/Makefile.am
+++ b/mri_ca_label/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_ca_label
 
 mri_ca_label_SOURCES=mri_ca_label.c mri_ca_label.help.xml.h
-mri_ca_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ca_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) -lxml2
 mri_ca_label_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_ca_normalize/Makefile.am
+++ b/mri_ca_normalize/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_cal_normalize mri_ca_normalize
 mri_cal_normalize_SOURCES=mri_cal_normalize.c
-mri_cal_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_cal_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_cal_normalize_LDFLAGS=$(OS_LDFLAGS)
 
 
 mri_ca_normalize_SOURCES=mri_ca_normalize.c
-mri_ca_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ca_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ca_normalize_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_ca_register/Makefile.am
+++ b/mri_ca_register/Makefile.am
@@ -12,7 +12,7 @@
 bin_PROGRAMS = mri_ca_register
 
 mri_ca_register_SOURCES=mri_ca_register.c
-mri_ca_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) 
+mri_ca_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) 
 mri_ca_register_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_ca_tissue_parms/Makefile.am
+++ b/mri_ca_tissue_parms/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_ca_tissue_parms
 mri_ca_tissue_parms_SOURCES=mri_ca_tissue_parms.c
-mri_ca_tissue_parms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ca_tissue_parms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ca_tissue_parms_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_ca_train/Makefile.am
+++ b/mri_ca_train/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_ca_train
 mri_ca_train_SOURCES=mri_ca_train.c
-mri_ca_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ca_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ca_train_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_cc/Makefile.am
+++ b/mri_cc/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_cc
 
 mri_cc_SOURCES=mri_cc.c mri_cc.help.xml.h
-mri_cc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_cc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_cc_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_cht2p/Makefile.am
+++ b/mri_cht2p/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_cht2p
 mri_cht2p_SOURCES=mri_cht2p.c
-mri_cht2p_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_cht2p_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_cht2p_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_cnr/Makefile.am
+++ b/mri_cnr/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_cnr
 mri_cnr_SOURCES=mri_cnr.c
-mri_cnr_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_cnr_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_cnr_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_compile_edits/Makefile.am
+++ b/mri_compile_edits/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_compile_edits
 mri_compile_edits_SOURCES=mri_compile_edits.c
-mri_compile_edits_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compile_edits_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compile_edits_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_compute_change_map/Makefile.am
+++ b/mri_compute_change_map/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_compute_change_map
 mri_compute_change_map_SOURCES=mri_compute_change_map.c
-mri_compute_change_map_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compute_change_map_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compute_change_map_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_compute_overlap/Makefile.am
+++ b/mri_compute_overlap/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_compute_overlap
 mri_compute_overlap_SOURCES=mri_compute_overlap.c
-mri_compute_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compute_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compute_overlap_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_compute_seg_overlap/Makefile.am
+++ b/mri_compute_seg_overlap/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_compute_seg_overlap
 mri_compute_seg_overlap_SOURCES=mri_compute_seg_overlap.c \
 	mri_compute_seg_overlap.help.xml.h
-mri_compute_seg_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compute_seg_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compute_seg_overlap_LDFLAGS=$(OS_LDFLAGS)
 
 TESTS=$(top_builddir)/scripts/help_xml_validate
--- a/mri_compute_structure_transforms/Makefile.am
+++ b/mri_compute_structure_transforms/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_compute_structure_transforms
 mri_compute_structure_transforms_SOURCES=mri_compute_structure_transforms.c
-mri_compute_structure_transforms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compute_structure_transforms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compute_structure_transforms_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_compute_volume_fractions/Makefile.am
+++ b/mri_compute_volume_fractions/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_compute_volume_fractions
 mri_compute_volume_fractions_SOURCES=mri_compute_volume_fractions.c
-mri_compute_volume_fractions_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compute_volume_fractions_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compute_volume_fractions_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_concat/Makefile.am
+++ b/mri_concat/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_concat
 mri_concat_SOURCES=mri_concat.c
-mri_concat_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_concat_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_concat_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_concatenate_lta/Makefile.am
+++ b/mri_concatenate_lta/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_concatenate_lta
 mri_concatenate_lta_SOURCES=mri_concatenate_lta.c
-mri_concatenate_lta_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_concatenate_lta_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_concatenate_lta_LDFLAGS=$(OS_LDFLAGS)
 
 # trick to get test data into the build directory during make distcheck
--- a/mri_convert/Makefile.am
+++ b/mri_convert/Makefile.am
@@ -6,11 +6,11 @@
 
 bin_PROGRAMS = mri_convert mri_make_uchar
 mri_convert_SOURCES=mri_convert.c mri_convert.help.xml.h
-mri_convert_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_convert_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_convert_LDFLAGS=$(OS_LDFLAGS)
 
 mri_make_uchar_SOURCES=mri_make_uchar.c
-mri_make_uchar_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_make_uchar_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_make_uchar_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_convert_mdh/Makefile.am
+++ b/mri_convert_mdh/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_convert_mdh
 mri_convert_mdh_SOURCES=mri_convert_mdh.c
-mri_convert_mdh_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_convert_mdh_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_convert_mdh_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_copy_values/Makefile.am
+++ b/mri_copy_values/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_copy_values
 mri_copy_values_SOURCES=mri_copy_values.c
-mri_copy_values_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_copy_values_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_copy_values_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_cor2label/Makefile.am
+++ b/mri_cor2label/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_cor2label
 mri_cor2label_SOURCES=mri_cor2label.c
-mri_cor2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_cor2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_cor2label_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_dct_align/Makefile.am
+++ b/mri_dct_align/Makefile.am
@@ -33,11 +33,11 @@
 
 bin_PROGRAMS = mri_dct_align_binary mri_dct_align
 mri_dct_align_binary_SOURCES=mri_dct_align_binary.c 
-mri_dct_align_binary_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_dct_align_binary_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_dct_align_binary_LDFLAGS=$(OS_LDFLAGS)
 
 mri_dct_align_SOURCES=mri_dct_align.c 
-mri_dct_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_dct_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_dct_align_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -62,7 +62,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_deface/Makefile.am
+++ b/mri_deface/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_deface
 mri_deface_SOURCES=mri_deface.c
-mri_deface_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_deface_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_deface_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_diff/Makefile.am
+++ b/mri_diff/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_diff
 mri_diff_SOURCES=mri_diff.c
-mri_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_diff_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_distance_transform/Makefile.am
+++ b/mri_distance_transform/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_distance_transform
 mri_distance_transform_SOURCES=mri_distance_transform.cpp
-mri_distance_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH) utilscpp/libutilscpp.a )
+mri_distance_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH) utilscpp/libutilscpp.a ) $(DLIBS_MGH)
 mri_distance_transform_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_edit_segmentation/Makefile.am
+++ b/mri_edit_segmentation/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_edit_segmentation
 mri_edit_segmentation_SOURCES=mri_edit_segmentation.c
-mri_edit_segmentation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_edit_segmentation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_edit_segmentation_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_edit_segmentation_with_surfaces/Makefile.am
+++ b/mri_edit_segmentation_with_surfaces/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_edit_segmentation_with_surfaces
 mri_edit_segmentation_with_surfaces_SOURCES=mri_edit_segmentation_with_surfaces.c
-mri_edit_segmentation_with_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_edit_segmentation_with_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_edit_segmentation_with_surfaces_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_edit_wm_with_aseg/Makefile.am
+++ b/mri_edit_wm_with_aseg/Makefile.am
@@ -9,7 +9,7 @@
 
 mri_edit_wm_with_aseg_SOURCES=mri_edit_wm_with_aseg.c \
 	mri_edit_wm_with_aseg.help.xml.h
-mri_edit_wm_with_aseg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_edit_wm_with_aseg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_edit_wm_with_aseg_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_em_register/Makefile.am
+++ b/mri_em_register/Makefile.am
@@ -12,7 +12,7 @@
 
 bin_PROGRAMS = mri_em_register
 mri_em_register_SOURCES=mri_em_register.c
-mri_em_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_em_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_em_register_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_estimate_tissue_parms/Makefile.am
+++ b/mri_estimate_tissue_parms/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_estimate_tissue_parms
 mri_estimate_tissue_parms_SOURCES=mri_estimate_tissue_parms.c
-mri_estimate_tissue_parms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_estimate_tissue_parms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_estimate_tissue_parms_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_evaluate_morph/Makefile.am
+++ b/mri_evaluate_morph/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_evaluate_morph
 mri_evaluate_morph_SOURCES=mri_evaluate_morph.c
-mri_evaluate_morph_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_evaluate_morph_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_evaluate_morph_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_extract/Makefile.am
+++ b/mri_extract/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_extract
 mri_extract_SOURCES=mri_extract.c
-mri_extract_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_extract_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_extract_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_extract_conditions/Makefile.am
+++ b/mri_extract_conditions/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_extract_conditions
 mri_extract_conditions_SOURCES=mri_extract_conditions.c
-mri_extract_conditions_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_extract_conditions_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_extract_conditions_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_extract_label/Makefile.am
+++ b/mri_extract_label/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_extract_label
 mri_extract_label_SOURCES=mri_extract_label.c
-mri_extract_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_extract_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_extract_label_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_extract_largest_CC/Makefile.am
+++ b/mri_extract_largest_CC/Makefile.am
@@ -11,7 +11,7 @@
 	myutil.h \
 	subroutines.c \
 	subroutines.h
-mri_extract_largest_CC_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_extract_largest_CC_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_extract_largest_CC_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_fieldsign/Makefile.am
+++ b/mri_fieldsign/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_fieldsign
 mri_fieldsign_SOURCES=mri_fieldsign.c
-mri_fieldsign_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_fieldsign_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_fieldsign_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_fill/Makefile.am
+++ b/mri_fill/Makefile.am
@@ -9,7 +9,7 @@
 
 mri_fill_SOURCES=mri_fill.c \
 	subroutines.c myutil.c myutil.h subroutines.h
-mri_fill_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_fill_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_fill_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_fslmat_to_lta/Makefile.am
+++ b/mri_fslmat_to_lta/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_fslmat_to_lta
 mri_fslmat_to_lta_SOURCES=mri_fslmat_to_lta.c
-mri_fslmat_to_lta_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_fslmat_to_lta_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_fslmat_to_lta_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_fuse_segmentations/Makefile.am
+++ b/mri_fuse_segmentations/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_fuse_segmentations
 mri_fuse_segmentations_SOURCES=mri_fuse_segmentations.c
-mri_fuse_segmentations_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_fuse_segmentations_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_fuse_segmentations_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_fwhm/Makefile.am
+++ b/mri_fwhm/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_fwhm
 mri_fwhm_SOURCES=mri_fwhm.c
-mri_fwhm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_fwhm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_fwhm_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_gca_ambiguous/Makefile.am
+++ b/mri_gca_ambiguous/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_gca_ambiguous
 mri_gca_ambiguous_SOURCES=mri_gca_ambiguous.c
-mri_gca_ambiguous_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_gca_ambiguous_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_gca_ambiguous_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_gcab_train/Makefile.am
+++ b/mri_gcab_train/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_gcab_train
 mri_gcab_train_SOURCES=mri_gcab_train.c
-mri_gcab_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_gcab_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_gcab_train_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_gcut/Makefile.am
+++ b/mri_gcut/Makefile.am
@@ -4,7 +4,7 @@
 bin_PROGRAMS = mri_gcut
 
 mri_gcut_SOURCES=mri_gcut.cpp mri_gcut.help.xml.h
-mri_gcut_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_gcut_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_gcut_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_gdfglm/Makefile.am
+++ b/mri_gdfglm/Makefile.am
@@ -7,9 +7,9 @@
 
 bin_PROGRAMS = mri_gdfglm
 
-mri_gdfglm_SOURCES=mri_gdfglm.c $(top_srcdir)/fsgdf/fsgdf.c
+mri_gdfglm_SOURCES=mri_gdfglm.c 
 
-mri_gdfglm_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_gdfglm_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 mri_gdfglm_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mri_glmfit/Makefile.am
+++ b/mri_glmfit/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_glmfit
 mri_glmfit_SOURCES=mri_glmfit.c $(top_srcdir)/fsgdf/fsgdf.c
-mri_glmfit_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_glmfit_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_glmfit_LDFLAGS=$(OS_LDFLAGS)
 
 # trick to get test data into the build directory
--- a/mri_hausdorff_dist/Makefile.am
+++ b/mri_hausdorff_dist/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_hausdorff_dist
 mri_hausdorff_dist_SOURCES=mri_hausdorff_dist.c
-mri_hausdorff_dist_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_hausdorff_dist_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_hausdorff_dist_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_head/Makefile.am
+++ b/mri_head/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_head
 mri_head_SOURCES=mri_head.c
-mri_head_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_head_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_head_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_hires_register/Makefile.am
+++ b/mri_hires_register/Makefile.am
@@ -13,27 +13,27 @@
 	mri_nl_align
 
 mri_hires_register_SOURCES=mri_hires_register.c
-mri_hires_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_hires_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_hires_register_LDFLAGS=$(OS_LDFLAGS)
 
 mri_nl_align_binary_SOURCES=mri_nl_align_binary.c
-mri_nl_align_binary_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_nl_align_binary_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_nl_align_binary_LDFLAGS=$(OS_LDFLAGS)
 
 mri_linear_align_binary_SOURCES=mri_linear_align_binary.c
-mri_linear_align_binary_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_linear_align_binary_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_linear_align_binary_LDFLAGS=$(OS_LDFLAGS)
 
 mri_compute_distances_SOURCES=mri_compute_distances.c
-mri_compute_distances_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_compute_distances_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_compute_distances_LDFLAGS=$(OS_LDFLAGS)
 
 mri_nl_align_SOURCES=mri_nl_align.c
-mri_nl_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_nl_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_nl_align_LDFLAGS=$(OS_LDFLAGS)
 
 mri_linear_align_SOURCES=mri_linear_align.c
-mri_linear_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_linear_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_linear_align_LDFLAGS=$(OS_LDFLAGS)
 
 EXTRA_DIST = make_movie.tcl
--- a/mri_histo_eq/Makefile.am
+++ b/mri_histo_eq/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_histo_eq
 mri_histo_eq_SOURCES=mri_histo_eq.c
-mri_histo_eq_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_histo_eq_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_histo_eq_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_histo_normalize/Makefile.am
+++ b/mri_histo_normalize/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_histo_normalize
 mri_histo_normalize_SOURCES=mri_histo_normalize.c
-mri_histo_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_histo_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_histo_normalize_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_info/Makefile.am
+++ b/mri_info/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_info
 mri_info_SOURCES=mri_info.c
-mri_info_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_info_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_info_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_interpolate/Makefile.am
+++ b/mri_interpolate/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_interpolate
 mri_interpolate_SOURCES=mri_interpolate.c
-mri_interpolate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_interpolate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_interpolate_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_jacobian/Makefile.am
+++ b/mri_jacobian/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_jacobian
 mri_jacobian_SOURCES=mri_jacobian.c
-mri_jacobian_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_jacobian_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_jacobian_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_joint_density/Makefile.am
+++ b/mri_joint_density/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_joint_density
 mri_joint_density_SOURCES=mri_joint_density.c
-mri_joint_density_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_joint_density_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_joint_density_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_label2label/Makefile.am
+++ b/mri_label2label/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_label2label
 mri_label2label_SOURCES=mri_label2label.c
-mri_label2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_label2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_label2label_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_label2vol/Makefile.am
+++ b/mri_label2vol/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_label2vol
 mri_label2vol_SOURCES=mri_label2vol.c
-mri_label2vol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_label2vol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_label2vol_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_label_accuracy/Makefile.am
+++ b/mri_label_accuracy/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_label_accuracy
 mri_label_accuracy_SOURCES=mri_label_accuracy.c
-mri_label_accuracy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_label_accuracy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_label_accuracy_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_label_histo/Makefile.am
+++ b/mri_label_histo/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_label_histo
 mri_label_histo_SOURCES=mri_label_histo.c
-mri_label_histo_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_label_histo_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_label_histo_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_label_vals/Makefile.am
+++ b/mri_label_vals/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_label_vals
 mri_label_vals_SOURCES=mri_label_vals.c
-mri_label_vals_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_label_vals_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_label_vals_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_label_volume/Makefile.am
+++ b/mri_label_volume/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_label_volume
 mri_label_volume_SOURCES=mri_label_volume.c
-mri_label_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_label_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_label_volume_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_linear_register/Makefile.am
+++ b/mri_linear_register/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_linear_register
 mri_linear_register_SOURCES=mri_linear_register.c
-mri_linear_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_linear_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_linear_register_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_log_likelihood/Makefile.am
+++ b/mri_log_likelihood/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_log_likelihood
 mri_log_likelihood_SOURCES=mri_log_likelihood.c
-mri_log_likelihood_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_log_likelihood_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_log_likelihood_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_make_bem_surfaces/Makefile.am
+++ b/mri_make_bem_surfaces/Makefile.am
@@ -9,7 +9,7 @@
 bin_PROGRAMS = mri_make_bem_surfaces
 mri_make_bem_surfaces_SOURCES=mri_make_bem_surfaces.c ../utils/machine.c
 # cyclic dependency between rgb and utils on swapInt etc.
-mri_make_bem_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_make_bem_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_make_bem_surfaces_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_make_density_map/Makefile.am
+++ b/mri_make_density_map/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_make_density_map
 mri_make_density_map_SOURCES=mri_make_density_map.c
-mri_make_density_map_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_make_density_map_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_make_density_map_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_make_register/Makefile.am
+++ b/mri_make_register/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_make_register
 mri_make_register_SOURCES=mri_make_register.c
-mri_make_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_make_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_make_register_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_make_template/Makefile.am
+++ b/mri_make_template/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_make_template
 mri_make_template_SOURCES=mri_make_template.c
-mri_make_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_make_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_make_template_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_map_cpdat/Makefile.am
+++ b/mri_map_cpdat/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_map_cpdat
 mri_map_cpdat_SOURCES=mri_map_cpdat.cpp
-mri_map_cpdat_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_map_cpdat_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_map_cpdat_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_mark_temporal_lobe/Makefile.am
+++ b/mri_mark_temporal_lobe/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_mark_temporal_lobe
 mri_mark_temporal_lobe_SOURCES=mri_mark_temporal_lobe.c
-mri_mark_temporal_lobe_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_mark_temporal_lobe_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_mark_temporal_lobe_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_mask/Makefile.am
+++ b/mri_mask/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_mask
 
 mri_mask_SOURCES=mri_mask.c mri_mask.help.xml.h
-mri_mask_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_mask_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_mask_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_matrix_multiply/Makefile.am
+++ b/mri_matrix_multiply/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_matrix_multiply
 mri_matrix_multiply_SOURCES=mri_matrix_multiply.c
-mri_matrix_multiply_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_matrix_multiply_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_matrix_multiply_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_mc/Makefile.am
+++ b/mri_mc/Makefile.am
@@ -4,7 +4,7 @@
 bin_PROGRAMS = mri_mc mri_pretess mris_extract_main_component
 
 mri_mc_SOURCES=mri_mc.c
-mri_mc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_mc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 foodir=$(prefix)/docs/xml
 foo_DATA=mri_pretess.help.xml mris_extract_main_component.help.xml
@@ -22,17 +22,17 @@
 TESTS=compare_test_volumes $(top_builddir)/scripts/help_xml_validate
 
 build_test_volume_SOURCES=build_test_volume.c
-build_test_volume_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+build_test_volume_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 mri_pretess_SOURCES=mri_pretess.c mri_pretess.help.xml.h
-mri_pretess_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_pretess_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 mris_extract_main_component_SOURCES=mris_extract_main_component.c \
 	mris_extract_main_component.help.xml.h
-mris_extract_main_component_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_extract_main_component_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 #build_MC_table_SOURCES=build_MC_table.c
-#build_MC_table_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#build_MC_table_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 EXTRA_DIST=compare_test_volumes test_volume_reference.mgz $(foo_DATA) \
 	build_MC_table.c mc_table.gif $(BUILT_SOURCES)
--- a/mri_mcsim/Makefile.am
+++ b/mri_mcsim/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_mcsim
 mri_mcsim_SOURCES=mri_mcsim.c
-mri_mcsim_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_mcsim_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_mcsim_LDFLAGS=$(OS_LDFLAGS)
 
 EXCLUDE_FILES=
--- a/mri_mi_nl_align/Makefile.am
+++ b/mri_mi_nl_align/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_mi_nl_align
 mri_mi_nl_align_SOURCES=mri_mi_nl_align.c gcam_mi.cpp
-mri_mi_nl_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_mi_nl_align_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_mi_nl_align_LDFLAGS=$(OS_LDFLAGS)
 
 EXTRA_DIST=gcam_mi.h
--- a/mri_modify/Makefile.am
+++ b/mri_modify/Makefile.am
@@ -8,11 +8,11 @@
 
 bin_PROGRAMS = mri_modify mri_copy_params
 mri_modify_SOURCES=mri_modify.cpp
-mri_modify_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_modify_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_modify_LDFLAGS=$(OS_LDFLAGS)
 
 mri_copy_params_SOURCES=mri_copy_params.cpp
-mri_copy_params_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_copy_params_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_copy_params_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_morphology/Makefile.am
+++ b/mri_morphology/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_morphology
 mri_morphology_SOURCES=mri_morphology.c
-mri_morphology_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_morphology_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_morphology_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_ms_EM/Makefile.am
+++ b/mri_ms_EM/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_ms_EM
 mri_ms_EM_SOURCES=mri_ms_EM.c myutils.c myutil.h \
 	PoissonSolver.c PoissonSolver.h
-mri_ms_EM_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ms_EM_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ms_EM_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_ms_EM_with_atlas/Makefile.am
+++ b/mri_ms_EM_with_atlas/Makefile.am
@@ -10,7 +10,7 @@
 	myutils.c myutil.h \
 	PoissonSolver.c PoissonSolver.h \
 	subroutines.c subroutines.h
-mri_ms_EM_with_atlas_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ms_EM_with_atlas_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ms_EM_with_atlas_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_ms_LDA/Makefile.am
+++ b/mri_ms_LDA/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_ms_LDA
 mri_ms_LDA_SOURCES=mri_ms_LDA.c
-mri_ms_LDA_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ms_LDA_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ms_LDA_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_ms_fitparms/Makefile.am
+++ b/mri_ms_fitparms/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_ms_fitparms
 mri_ms_fitparms_SOURCES=mri_ms_fitparms.c mri_ms_fitparms.help.xml.h
-mri_ms_fitparms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ms_fitparms_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ms_fitparms_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
@@ -23,4 +23,4 @@
 EXCLUDE_FILES=""
 include $(top_srcdir)/Makefile.extra
 
-BUILT_SOURCES=mri_ms_fitparms.help.xml.h
\ No newline at end of file
+BUILT_SOURCES=mri_ms_fitparms.help.xml.h
--- a/mri_multispectral_segment/Makefile.am
+++ b/mri_multispectral_segment/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_multispectral_segment
 mri_multispectral_segment_SOURCES=mri_multispectral_segment.c
-mri_multispectral_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_multispectral_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_multispectral_segment_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_nlfilter/Makefile.am
+++ b/mri_nlfilter/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_nlfilter
 mri_nlfilter_SOURCES=mri_nlfilter.c
-mri_nlfilter_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_nlfilter_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_nlfilter_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_normalize/Makefile.am
+++ b/mri_normalize/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_normalize
 mri_normalize_SOURCES=mri_normalize.c mri_normalize.help.xml.h
-mri_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_normalize_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_normalize_tp2/Makefile.am
+++ b/mri_normalize_tp2/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_normalize_tp2
 mri_normalize_tp2_SOURCES=mri_normalize_tp2.c
-mri_normalize_tp2_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_normalize_tp2_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_normalize_tp2_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_otl/Makefile.am
+++ b/mri_otl/Makefile.am
@@ -7,6 +7,6 @@
 
 bin_PROGRAMS = list_otl_labels
 list_otl_labels_SOURCES= list_otl_labels.c
-list_otl_labels_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+list_otl_labels_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 list_otl_labels_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mri_paint/Makefile.am
+++ b/mri_paint/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_paint
 mri_paint_SOURCES=mri_paint.c
-mri_paint_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_paint_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_paint_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_parse_sdcmdir/Makefile.am
+++ b/mri_parse_sdcmdir/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS=mri_parse_sdcmdir
 mri_parse_sdcmdir_SOURCES=mri_parse_sdcmdir.c
-mri_parse_sdcmdir_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_parse_sdcmdir_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_parse_sdcmdir_LDFLAGS=$(OS_LDFLAGS)
 
 # trick to get test data into build dir
--- a/mri_parselabel/Makefile.am
+++ b/mri_parselabel/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_parselabel
 mri_parselabel_SOURCES=mri_parselabel.cpp
-mri_parselabel_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_parselabel_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_parselabel_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_partial_ribbon/Makefile.am
+++ b/mri_partial_ribbon/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_partial_ribbon
 mri_partial_ribbon_SOURCES=mri_partial_ribbon.c
-mri_partial_ribbon_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_partial_ribbon_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_partial_ribbon_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_path2label/Makefile.am
+++ b/mri_path2label/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_path2label
 mri_path2label_SOURCES=mri_path2label.c
-mri_path2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_path2label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_path2label_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_polv/Makefile.am
+++ b/mri_polv/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_polv
 mri_polv_SOURCES=mri_polv.c
-mri_polv_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_polv_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_polv_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_probe_ima/Makefile.am
+++ b/mri_probe_ima/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_probe_ima
 mri_probe_ima_SOURCES=mri_probe_ima.c
-mri_probe_ima_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_probe_ima_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_probe_ima_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_probedicom/Makefile.am
+++ b/mri_probedicom/Makefile.am
@@ -10,8 +10,8 @@
 if HAVE_OPENGL_LIBS
 bin_PROGRAMS = mri_probedicom
 mri_probedicom_SOURCES=mri_probedicom.c
-mri_probedicom_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(X_LIBS) $(LIBS_OPENGL) $(top_builddir)/glut/libglut.a
+mri_probedicom_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(X_LIBS) $(LIBS_OPENGL) -lglut
 mri_probedicom_LDFLAGS=
 else
 bin_PROGRAMS=
--- a/mri_reduce/Makefile.am
+++ b/mri_reduce/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_reduce
 mri_reduce_SOURCES=mri_reduce.c
-mri_reduce_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_reduce_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_reduce_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_register/Makefile.am
+++ b/mri_register/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_register
 mri_register_SOURCES=mri_register.c
-mri_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_register_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_relabel_hypointensities/Makefile.am
+++ b/mri_relabel_hypointensities/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_relabel_hypointensities
 mri_relabel_hypointensities_SOURCES=mri_relabel_hypointensities.c
-mri_relabel_hypointensities_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_relabel_hypointensities_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_relabel_hypointensities_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_remove_neck/Makefile.am
+++ b/mri_remove_neck/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_remove_neck
 mri_remove_neck_SOURCES=mri_remove_neck.c
-mri_remove_neck_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_remove_neck_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_remove_neck_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_ribbon/Makefile.am
+++ b/mri_ribbon/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_ribbon
 mri_ribbon_SOURCES=mri_ribbon.c
-mri_ribbon_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_ribbon_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_ribbon_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_rigid_register/Makefile.am
+++ b/mri_rigid_register/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_rigid_register
 mri_rigid_register_SOURCES=mri_rigid_register.c
-mri_rigid_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_rigid_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_rigid_register_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_robust_register/Makefile.am
+++ b/mri_robust_register/Makefile.am
@@ -27,31 +27,31 @@
 	CostFunctions.cpp MyMatrix.cpp MyMRI.cpp \
 	Quaternion.cpp Registration.cpp RegPowell.cpp \
 	mri_robust_register.cpp mri_robust_register.help.xml.h
-mri_robust_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mri_robust_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
   $(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A) $(LIB_GFORTRAN)
 mri_robust_register_LDFLAGS=$(OS_LDFLAGS) $(OTHERLDFLAGS)
 
 mri_robust_template_SOURCES= Registration.cpp \
 	CostFunctions.cpp MyMatrix.cpp MyMRI.cpp Quaternion.cpp \
 	MultiRegistration.cpp mri_robust_template.cpp mri_robust_template.help.xml.h
-mri_robust_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mri_robust_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
   $(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A) $(LIB_GFORTRAN)
 mri_robust_template_LDFLAGS=$(OS_LDFLAGS) $(OTHERLDFLAGS)
 
 lta_diff_SOURCES=lta_diff.cpp Registration.cpp \
 	CostFunctions.cpp MyMatrix.cpp MyMRI.cpp Quaternion.cpp
-lta_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+lta_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
   $(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A) $(LIB_GFORTRAN)
 lta_diff_LDFLAGS=$(OS_LDFLAGS) $(OTHERLDFLAGS)
 
 mri_create_tests_SOURCES=mri_create_tests.cpp Quaternion.cpp \
 	MyMatrix.cpp MyMRI.cpp
-mri_create_tests_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mri_create_tests_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
   $(LIB_LAPACK_A) $(LIB_BLAS_A) $(LIB_G2C_A) $(LIB_GFORTRAN)
 mri_create_tests_LDFLAGS=$(OS_LDFLAGS) $(OTHERLDFLAGS)
 
 mri_gradient_info_SOURCES=mri_gradient_info.cpp
-mri_gradient_info_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_gradient_info_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_gradient_info_LDFLAGS=$(OS_LDFLAGS) $(OTHERLDFLAGS)
 
 # trick to get test data into the build directory
--- a/mri_seg_diff/Makefile.am
+++ b/mri_seg_diff/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_seg_diff
 mri_seg_diff_SOURCES=mri_seg_diff.c
-mri_seg_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_seg_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_seg_diff_LDFLAGS=$(OS_LDFLAGS)
 
 EXCLUDE_FILES=
--- a/mri_seghead/Makefile.am
+++ b/mri_seghead/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_seghead
 mri_seghead_SOURCES=mri_seghead.c
-mri_seghead_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_seghead_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_seghead_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_segment/Makefile.am
+++ b/mri_segment/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_segment
 
 mri_segment_SOURCES=mri_segment.c mri_segment.help.xml.h
-mri_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_segment_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_segment_wm_damage/Makefile.am
+++ b/mri_segment_wm_damage/Makefile.am
@@ -7,13 +7,13 @@
 
 bin_PROGRAMS = mri_segment_wm_damage
 mri_segment_wm_damage_SOURCES=mri_segment_wm_damage.c
-mri_segment_wm_damage_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_segment_wm_damage_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_segment_wm_damage_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_segreg/Makefile.am
+++ b/mri_segreg/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_segreg
 mri_segreg_SOURCES=mri_segreg.c
-mri_segreg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_segreg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_segreg_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_segstats/Makefile.am
+++ b/mri_segstats/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mri_segstats
 
 mri_segstats_SOURCES=mri_segstats.c mri_segstats.help.xml.h
-mri_segstats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_segstats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_segstats_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_simulate_atrophy/Makefile.am
+++ b/mri_simulate_atrophy/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mri_simulate_atrophy
 mri_simulate_atrophy_SOURCES=mri_simulate_atrophy.c
-mri_simulate_atrophy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_simulate_atrophy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_simulate_atrophy_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_stats2seg/Makefile.am
+++ b/mri_stats2seg/Makefile.am
@@ -6,8 +6,8 @@
 AM_CXXFLAGS=-I$(top_srcdir)/include -I$(top_srcdir)/include/dicom
 
 bin_PROGRAMS = mri_stats2seg
-mri_stats2seg_SOURCES=mri_stats2seg.c $(top_srcdir)/fsgdf/fsgdf.c
-mri_stats2seg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_stats2seg_SOURCES=mri_stats2seg.c
+mri_stats2seg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_stats2seg_LDFLAGS=$(OS_LDFLAGS)
 
 EXCLUDE_FILES=
--- a/mri_strip_nonwhite/Makefile.am
+++ b/mri_strip_nonwhite/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_strip_nonwhite
 mri_strip_nonwhite_SOURCES=mri_strip_nonwhite.c
-mri_strip_nonwhite_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_strip_nonwhite_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_strip_nonwhite_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_strip_subject_info/Makefile.am
+++ b/mri_strip_subject_info/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_strip_subject_info
 mri_strip_subject_info_SOURCES=mri_strip_subject_info.c
-mri_strip_subject_info_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_strip_subject_info_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_strip_subject_info_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_surf2surf/Makefile.am
+++ b/mri_surf2surf/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_surf2surf
 mri_surf2surf_SOURCES=mri_surf2surf.c
-mri_surf2surf_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_surf2surf_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_surf2surf_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_surf2vol/Makefile.am
+++ b/mri_surf2vol/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_surf2vol
 mri_surf2vol_SOURCES=mri_surf2vol.c
-mri_surf2vol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_surf2vol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_surf2vol_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_surfacemask/Makefile.am
+++ b/mri_surfacemask/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_surfacemask
 mri_surfacemask_SOURCES=mri_surfacemask.cpp
-mri_surfacemask_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_surfacemask_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_surfacemask_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_surfcluster/Makefile.am
+++ b/mri_surfcluster/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mri_surfcluster
 mri_surfcluster_SOURCES=mri_surfcluster.c
-mri_surfcluster_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_surfcluster_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_surfcluster_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_synthesize/Makefile.am
+++ b/mri_synthesize/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_synthesize
 mri_synthesize_SOURCES=mri_synthesize.c
-mri_synthesize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_synthesize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_synthesize_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_tessellate/Makefile.am
+++ b/mri_tessellate/Makefile.am
@@ -7,11 +7,11 @@
 
 bin_PROGRAMS = mri_tessellate ico_supersample
 mri_tessellate_SOURCES=mri_tessellate.c mri_tessellate.help.xml.h
-mri_tessellate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_tessellate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_tessellate_LDFLAGS=$(OS_LDFLAGS)
 
 ico_supersample_SOURCES=ico_supersample.c trilib.h systemid.h
-ico_supersample_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+ico_supersample_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 ico_supersample_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_threshold/Makefile.am
+++ b/mri_threshold/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_threshold
 mri_threshold_SOURCES=mri_threshold.c
-mri_threshold_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_threshold_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_threshold_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_topologycorrection/Makefile.am
+++ b/mri_topologycorrection/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_topologycorrection
 mri_topologycorrection_SOURCES=mri_topologycorrection.c
-mri_topologycorrection_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_topologycorrection_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_topologycorrection_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_train/Makefile.am
+++ b/mri_train/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_train
 mri_train_SOURCES=mri_train.c
-mri_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_train_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_transform/Makefile.am
+++ b/mri_transform/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_transform
 mri_transform_SOURCES=mri_transform.c
-mri_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_transform_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_transform_to_COR/Makefile.am
+++ b/mri_transform_to_COR/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_transform_to_COR
 mri_transform_to_COR_SOURCES=mri_transform_to_COR.c
-mri_transform_to_COR_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_transform_to_COR_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_transform_to_COR_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mri_twoclass/Makefile.am
+++ b/mri_twoclass/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_twoclass
 mri_twoclass_SOURCES=mri_twoclass.c
-mri_twoclass_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_twoclass_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_twoclass_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_vol2roi/Makefile.am
+++ b/mri_vol2roi/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_vol2roi
 mri_vol2roi_SOURCES=mri_vol2roi.c
-mri_vol2roi_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_vol2roi_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_vol2roi_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_vol2surf/Makefile.am
+++ b/mri_vol2surf/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_vol2surf
 mri_vol2surf_SOURCES=mri_vol2surf.c
-mri_vol2surf_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_vol2surf_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_vol2surf_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_vol2vol/Makefile.am
+++ b/mri_vol2vol/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_vol2vol
 mri_vol2vol_SOURCES=mri_vol2vol.c
-mri_vol2vol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_vol2vol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_vol2vol_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_volcluster/Makefile.am
+++ b/mri_volcluster/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_volcluster
 mri_volcluster_SOURCES=mri_volcluster.c
-mri_volcluster_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_volcluster_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_volcluster_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_voldiff/Makefile.am
+++ b/mri_voldiff/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mri_voldiff
 mri_voldiff_SOURCES=mri_voldiff.c
-mri_voldiff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_voldiff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_voldiff_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_volsynth/Makefile.am
+++ b/mri_volsynth/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_volsynth
 mri_volsynth_SOURCES=mri_volsynth.c
-mri_volsynth_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_volsynth_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_volsynth_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_watershed/Makefile.am
+++ b/mri_watershed/Makefile.am
@@ -8,11 +8,11 @@
 bin_PROGRAMS = mri_watershed  mri_validate_skull_stripped
 
 mri_watershed_SOURCES=mri_watershed.cpp mri_watershed.help.xml.h
-mri_watershed_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_watershed_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_watershed_LDFLAGS=$(OS_LDFLAGS)
 
 mri_validate_skull_stripped_SOURCES=mri_validate_skull_stripped.cpp
-mri_validate_skull_stripped_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_validate_skull_stripped_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_validate_skull_stripped_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mri_watershed/brain_volume/Makefile.am
+++ b/mri_watershed/brain_volume/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mri_brain_volume
 mri_brain_volume_SOURCES=mri_brain_volume.cpp mrivariables.h TVector.h
-mri_brain_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_brain_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_brain_volume_LDFLAGS=$(OS_LDFLAGS)
 
 check_PROGRAMS = test
 test_SOURCES=test.cpp TVector.h
-test_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+test_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 test_LDFLAGS=$(OS_LDFLAGS)
 
 TESTS = test
--- a/mri_wmfilter/Makefile.am
+++ b/mri_wmfilter/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_wmfilter
 mri_wmfilter_SOURCES=mri_wmfilter.c
-mri_wmfilter_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_wmfilter_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_wmfilter_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mri_xvolavg/Makefile.am
+++ b/mri_xvolavg/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_xvolavg
 mri_xvolavg_SOURCES=mri_xvolavg.c
-mri_xvolavg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_xvolavg_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_xvolavg_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mri_z2p/Makefile.am
+++ b/mri_z2p/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mri_z2p
 mri_z2p_SOURCES=mri_z2p.c
-mri_z2p_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mri_z2p_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mri_z2p_LDFLAGS=$(OS_LDFLAGS)
 # to --------------------------------------------------
 #
--- a/mris2rgb/Makefile.am
+++ b/mris2rgb/Makefile.am
@@ -22,9 +22,9 @@
 if HAVE_OPENGL_LIBS
 bin_PROGRAMS = mris2rgb
 mris2rgb_SOURCES=mris2rgb.c
-mris2rgb_LDADD= $(addprefix $(top_builddir)/,$(LIBS_MGH)) \
+mris2rgb_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)\
 	$(LIBS_OPENGL) -lGL $(LIBTIFF) \
-	$(top_builddir)/glut/libglut.a
+	-lglut
 mris2rgb_LDFLAGS=
 else
 bin_PROGRAMS=
--- a/mris_BA_segment/Makefile.am
+++ b/mris_BA_segment/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_BA_segment
 mris_BA_segment_SOURCES=mris_BA_segment.c
-mris_BA_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_BA_segment_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_BA_segment_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_add_template/Makefile.am
+++ b/mris_add_template/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_add_template
 mris_add_template_SOURCES=mris_add_template.c
-mris_add_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_add_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_add_template_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_anatomical_stats/Makefile.am
+++ b/mris_anatomical_stats/Makefile.am
@@ -9,7 +9,7 @@
 
 mris_anatomical_stats_SOURCES=mris_anatomical_stats.c \
 	mris_anatomical_stats.help.xml.h
-mris_anatomical_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_anatomical_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_anatomical_stats_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_annot_to_segmentation/Makefile.am
+++ b/mris_annot_to_segmentation/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_annot_to_segmentation
 mris_annot_to_segmentation_SOURCES=mris_annot_to_segmentation.c
-mris_annot_to_segmentation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_annot_to_segmentation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_annot_to_segmentation_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_aseg_distance/Makefile.am
+++ b/mris_aseg_distance/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_aseg_distance
 mris_aseg_distance_SOURCES=mris_aseg_distance.c
-mris_aseg_distance_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_aseg_distance_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_aseg_distance_LDFLAGS=$(OS_LDFLAGS)
 
 EXCLUDE_FILES=
--- a/mris_average_curvature/Makefile.am
+++ b/mris_average_curvature/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_average_curvature
 mris_average_curvature_SOURCES=mris_average_curvature.c
-mris_average_curvature_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_average_curvature_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_average_curvature_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_average_parcellation/Makefile.am
+++ b/mris_average_parcellation/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_average_parcellation
 mris_average_parcellation_SOURCES=mris_average_parcellation.c
-mris_average_parcellation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_average_parcellation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_average_parcellation_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_ca_label/Makefile.am
+++ b/mris_ca_label/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_ca_label
 
 mris_ca_label_SOURCES=mris_ca_label.c mris_ca_label.help.xml.h
-mris_ca_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_ca_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_ca_label_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_ca_train/Makefile.am
+++ b/mris_ca_train/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_ca_train
 mris_ca_train_SOURCES=mris_ca_train.c
-mris_ca_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_ca_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_ca_train_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_calc/Makefile.am
+++ b/mris_calc/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_calc
 
 mris_calc_SOURCES=mris_calc.c mris_calc.help.xml.h
-mris_calc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_calc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_calc_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_classify_thickness/Makefile.am
+++ b/mris_classify_thickness/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_classify_thickness
 mris_classify_thickness_SOURCES=mris_classify_thickness.c
-mris_classify_thickness_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_classify_thickness_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_classify_thickness_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_compute_acorr/Makefile.am
+++ b/mris_compute_acorr/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_compute_acorr
 mris_compute_acorr_SOURCES=mris_compute_acorr.c
-mris_compute_acorr_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_compute_acorr_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_compute_acorr_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_compute_optimal_kernel/Makefile.am
+++ b/mris_compute_optimal_kernel/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_compute_optimal_kernel
 mris_compute_optimal_kernel_SOURCES=mris_compute_optimal_kernel.c
-mris_compute_optimal_kernel_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_compute_optimal_kernel_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_compute_optimal_kernel_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_compute_overlap/Makefile.am
+++ b/mris_compute_overlap/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_compute_overlap
 mris_compute_overlap_SOURCES=mris_compute_overlap.c
-mris_compute_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_compute_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_compute_overlap_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_compute_parc_overlap/Makefile.am
+++ b/mris_compute_parc_overlap/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_compute_parc_overlap
 mris_compute_parc_overlap_SOURCES=mris_compute_parc_overlap.c
-mris_compute_parc_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_compute_parc_overlap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_compute_parc_overlap_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_congeal/Makefile.am
+++ b/mris_congeal/Makefile.am
@@ -16,7 +16,7 @@
 
 bin_PROGRAMS = mris_congeal
 mris_congeal_SOURCES=mris_congeal.c
-mris_congeal_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mris_congeal_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	-L$(top_builddir)/tetgen -ltetgen $(LIBS_PETSC)
 mris_congeal_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mris_convert/Makefile.am
+++ b/mris_convert/Makefile.am
@@ -13,7 +13,7 @@
 
 bin_PROGRAMS = mris_convert
 mris_convert_SOURCES=mris_convert.c
-mris_convert_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_convert_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_convert_LDFLAGS=$(OS_LDFLAGS)
 
 # trick to get test data into the build directory (mris_expand testdat is used)
--- a/mris_curvature/Makefile.am
+++ b/mris_curvature/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_curvature
 
 mris_curvature_SOURCES=mris_curvature.c mris_curvature.help.xml.h
-mris_curvature_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_curvature_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_curvature_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_curvature_stats/Makefile.am
+++ b/mris_curvature_stats/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_curvature_stats
 mris_curvature_stats_SOURCES=mris_curvature_stats.c
-mris_curvature_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_curvature_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_curvature_stats_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_decimate/Makefile.am
+++ b/mris_decimate/Makefile.am
@@ -8,7 +8,7 @@
 if HAVE_GTS_LIBS
     bin_PROGRAMS = mris_decimate
     mris_decimate_SOURCES=mris_decimate.cpp mris_decimate.h main.cpp
-    mris_decimate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(GTS_LIBS)
+    mris_decimate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(GTS_LIBS)
     mris_decimate_LDFLAGS=$(OS_LDFLAGS)
 endif
 
--- a/mris_decimate_gui/Makefile.am
+++ b/mris_decimate_gui/Makefile.am
@@ -40,13 +40,13 @@
         res/DecimatePanelBase.cpp \
         res/DecimatePanelBase.h \
         res/DecimatePanelBase.fbp
-    mris_decimate_gui_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+    mris_decimate_gui_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
             $(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
             $(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
             $(VTK_TIFF_LIB) $(VTK_JPEG_LIB) \
             $(VTK_METAIO_LIB) $(VTK_PNG_LIB) $(VTK_Z_LIB) \
             $(VTK_SQLITE_LIB) \
-            -lvtkexoIIc -lvtkNetCDF \
+            -lvtkexoIIc -lnetcdf \
             -lvtkVolumeRendering -lvtkRendering -lvtkftgl \
             -lvtkHybrid -lvtkWidgets \
             -lvtkGraphics \
--- a/mris_deform/Makefile.am
+++ b/mris_deform/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mris_deform mris_ca_deform mris_nudge
 mris_deform_SOURCES=mris_deform.c
-mris_deform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_deform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_deform_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
@@ -21,10 +21,10 @@
 include $(top_srcdir)/Makefile.extra
 
 mris_ca_deform_SOURCES=mris_ca_deform.c
-mris_ca_deform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_ca_deform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_ca_deform_LDFLAGS=$(OS_LDFLAGS)
 
 
 mris_nudge_SOURCES=mris_nudge.c
-mris_nudge_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_nudge_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_nudge_LDFLAGS=$(OS_LDFLAGS)
--- a/mris_density/Makefile.am
+++ b/mris_density/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_density
 mris_density_SOURCES=mris_density.c
-mris_density_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_density_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_density_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_diff/Makefile.am
+++ b/mris_diff/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_diff
 mris_diff_SOURCES=mris_diff.c
-mris_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_diff_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_distance_map/Makefile.am
+++ b/mris_distance_map/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_distance_map
 mris_distance_map_SOURCES=mris_distance_map.c
-mris_distance_map_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_distance_map_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_distance_map_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_distance_to_label/Makefile.am
+++ b/mris_distance_to_label/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_distance_to_label
 mris_distance_to_label_SOURCES=mris_distance_to_label.cpp
-mris_distance_to_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH) utilscpp/libutilscpp.a )
+mris_distance_to_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH) utilscpp/libutilscpp.a ) $(DLIBS_MGH)
 mris_distance_to_label_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_distance_transform/Makefile.am
+++ b/mris_distance_transform/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_distance_transform
 mris_distance_transform_SOURCES=mris_distance_transform.c 
-mris_distance_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_distance_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_distance_transform_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_divide_parcellation/Makefile.am
+++ b/mris_divide_parcellation/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_divide_parcellation
 mris_divide_parcellation_SOURCES=mris_divide_parcellation.c
-mris_divide_parcellation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_divide_parcellation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_divide_parcellation_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_entropy/Makefile.am
+++ b/mris_entropy/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_entropy
 mris_entropy_SOURCES=mris_entropy.c
-mris_entropy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_entropy_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_entropy_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_errors/Makefile.am
+++ b/mris_errors/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_errors
 mris_errors_SOURCES=mris_errors.c
-mris_errors_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_errors_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_errors_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_euler_number/Makefile.am
+++ b/mris_euler_number/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_euler_number
 
 mris_euler_number_SOURCES=mris_euler_number.c mris_euler_number.help.xml.h
-mris_euler_number_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_euler_number_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_euler_number_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_expand/Makefile.am
+++ b/mris_expand/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mris_expand
 mris_expand_SOURCES=mris_expand.c
-mris_expand_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_expand_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_expand_LDFLAGS=$(OS_LDFLAGS)
 
 # trick to get test data into the build directory
--- a/mris_fbirn_annot/Makefile.am
+++ b/mris_fbirn_annot/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_fbirn_annot
 mris_fbirn_annot_SOURCES=mris_fbirn_annot.c
-mris_fbirn_annot_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_fbirn_annot_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_fbirn_annot_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_fill/Makefile.am
+++ b/mris_fill/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_fill
 mris_fill_SOURCES=mris_fill.c
-mris_fill_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_fill_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_fill_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_find_flat_regions/Makefile.am
+++ b/mris_find_flat_regions/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_find_flat_regions
 mris_find_flat_regions_SOURCES=mris_find_flat_regions.c
-mris_find_flat_regions_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_find_flat_regions_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_find_flat_regions_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_fix_topology/Makefile.am
+++ b/mris_fix_topology/Makefile.am
@@ -8,11 +8,11 @@
 bin_PROGRAMS = mris_fix_topology mris_remove_intersection
 
 mris_fix_topology_SOURCES=mris_fix_topology.c
-mris_fix_topology_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_fix_topology_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_fix_topology_LDFLAGS=$(OS_LDFLAGS)
 
 mris_remove_intersection_SOURCES=mris_remove_intersection.c
-mris_remove_intersection_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_remove_intersection_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_remove_intersection_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_flatten/Makefile.am
+++ b/mris_flatten/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_flatten
 mris_flatten_SOURCES=mris_flatten.c
-mris_flatten_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_flatten_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_flatten_LDFLAGS=$(OS_LDFLAGS)
 
 ## ----
--- a/mris_fwhm/Makefile.am
+++ b/mris_fwhm/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_fwhm
 mris_fwhm_SOURCES=mris_fwhm.c
-mris_fwhm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_fwhm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_fwhm_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_glm/Makefile.am
+++ b/mris_glm/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_glm
 mris_glm_SOURCES=mris_glm.c $(top_srcdir)/fsgdf/fsgdf.c
-mris_glm_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) 
+mris_glm_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) 
 mris_glm_LDFLAGS=
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_hausdorff_dist/Makefile.am
+++ b/mris_hausdorff_dist/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_hausdorff_dist
 mris_hausdorff_dist_SOURCES=mris_hausdorff_dist.c 
-mris_hausdorff_dist_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_hausdorff_dist_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_hausdorff_dist_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_inflate/Makefile.am
+++ b/mris_inflate/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_inflate
 
 mris_inflate_SOURCES=mris_inflate.c mris_inflate.help.xml.h
-mris_inflate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_inflate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_inflate_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_info/Makefile.am
+++ b/mris_info/Makefile.am
@@ -13,7 +13,7 @@
 
 bin_PROGRAMS = mris_info
 mris_info_SOURCES=mris_info.cpp
-mris_info_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_info_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_info_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_jacobian/Makefile.am
+++ b/mris_jacobian/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_jacobian
 
 mris_jacobian_SOURCES=mris_jacobian.c mris_jacobian.help.xml.h
-mris_jacobian_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_jacobian_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_jacobian_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_label2annot/Makefile.am
+++ b/mris_label2annot/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_label2annot
 mris_label2annot_SOURCES=mris_label2annot.c
-mris_label2annot_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_label2annot_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_label2annot_LDFLAGS=$(OS_LDFLAGS)
 
 EXTRA_DIST = runit
--- a/mris_label_area/Makefile.am
+++ b/mris_label_area/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_label_area
 mris_label_area_SOURCES=mris_label_area.c
-mris_label_area_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_label_area_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_label_area_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_label_calc/Makefile.am
+++ b/mris_label_calc/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_label_calc
 mris_label_calc_SOURCES=mris_label_calc.cpp
-mris_label_calc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_label_calc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_label_calc_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_label_mode/Makefile.am
+++ b/mris_label_mode/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_label_mode
 mris_label_mode_SOURCES=mris_label_mode.c
-mris_label_mode_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_label_mode_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_label_mode_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_longitudinal_surfaces/Makefile.am
+++ b/mris_longitudinal_surfaces/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mris_longitudinal_surfaces
 mris_longitudinal_surfaces_SOURCES=mris_longitudinal_surfaces.c
-mris_longitudinal_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_longitudinal_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_longitudinal_surfaces_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_make_average_surface/Makefile.am
+++ b/mris_make_average_surface/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_make_average_surface
 mris_make_average_surface_SOURCES=mris_make_average_surface.c
-mris_make_average_surface_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_make_average_surface_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_make_average_surface_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_make_face_parcellation/Makefile.am
+++ b/mris_make_face_parcellation/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_make_face_parcellation
 mris_make_face_parcellation_SOURCES=mris_make_face_parcellation.c
-mris_make_face_parcellation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_make_face_parcellation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_make_face_parcellation_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_make_surfaces/Makefile.am
+++ b/mris_make_surfaces/Makefile.am
@@ -11,19 +11,19 @@
 	mris_exvivo_surfaces
 
 mris_make_surfaces_SOURCES=mris_make_surfaces.c mris_make_surfaces.help.xml.h
-mris_make_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_make_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_make_surfaces_LDFLAGS= $(OS_LDFLAGS)
 
 mris_refine_surfaces_SOURCES=mris_refine_surfaces.c
-mris_refine_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_refine_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_refine_surfaces_LDFLAGS= $(OS_LDFLAGS)
 
 mris_mef_surfaces_SOURCES=mris_mef_surfaces.c
-mris_mef_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_mef_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_mef_surfaces_LDFLAGS= $(OS_LDFLAGS)
 
 mris_exvivo_surfaces_SOURCES=mris_exvivo_surfaces.c
-mris_exvivo_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_exvivo_surfaces_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_exvivo_surfaces_LDFLAGS= $(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_make_template/Makefile.am
+++ b/mris_make_template/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_make_template
 mris_make_template_SOURCES=mris_make_template.c
-mris_make_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_make_template_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_make_template_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_map_cuts/Makefile.am
+++ b/mris_map_cuts/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_map_cuts
 mris_map_cuts_SOURCES=mris_map_cuts.c
-mris_map_cuts_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_map_cuts_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_map_cuts_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_merge_parcellations/Makefile.am
+++ b/mris_merge_parcellations/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_merge_parcellations
 mris_merge_parcellations_SOURCES=mris_merge_parcellations.c 
-mris_merge_parcellations_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_merge_parcellations_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_merge_parcellations_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_morph_stats/Makefile.am
+++ b/mris_morph_stats/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_morph_stats
 mris_morph_stats_SOURCES=mris_morph_stats.c
-mris_morph_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_morph_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_morph_stats_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_ms_refine/Makefile.am
+++ b/mris_ms_refine/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_ms_refine
 mris_ms_refine_SOURCES=mris_ms_refine.c
-mris_ms_refine_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_ms_refine_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_ms_refine_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_ms_surface_CNR/Makefile.am
+++ b/mris_ms_surface_CNR/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mris_ms_surface_CNR
 mris_ms_surface_CNR_SOURCES=mris_ms_surface_CNR.c
-mris_ms_surface_CNR_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_ms_surface_CNR_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_ms_surface_CNR_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_multiscale_stats/Makefile.am
+++ b/mris_multiscale_stats/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_multiscale_stats
 mris_multiscale_stats_SOURCES=mris_multiscale_stats.c
-mris_multiscale_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_multiscale_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_multiscale_stats_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_niters2fwhm/Makefile.am
+++ b/mris_niters2fwhm/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_niters2fwhm
 mris_niters2fwhm_SOURCES=mris_niters2fwhm.c
-mris_niters2fwhm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_niters2fwhm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_niters2fwhm_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_parcellate_connectivity/Makefile.am
+++ b/mris_parcellate_connectivity/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_parcellate_connectivity
 mris_parcellate_connectivity_SOURCES=mris_parcellate_connectivity.c
-mris_parcellate_connectivity_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_parcellate_connectivity_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_parcellate_connectivity_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_pmake/Makefile.am
+++ b/mris_pmake/Makefile.am
@@ -30,13 +30,13 @@
     AM_CFLAGS=-I$(top_srcdir)/include
     AM_CXXFLAGS=-I$(top_srcdir)/include \
 	-I$(top_srcdir)/opencl_algorithms/ $(OPENCL_CFLAGS)
-    mris_pmake_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+    mris_pmake_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	../opencl_algorithms/libopencl_algorithms.a $(OPENCL_LIBS)
     mris_pmake_LDFLAGS = $(OS_LDFLAGS)
 else # No OpenCL present
     AM_CFLAGS=-I$(top_srcdir)/include
     AM_CXXFLAGS=-I$(top_srcdir)/include -I$(top_srcdir)/opencl_algorithms/ 
-    mris_pmake_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+    mris_pmake_LDADD = $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	../opencl_algorithms/libopencl_algorithms.a
     mris_pmake_LDFLAGS = $(OS_LDFLAGS)
 endif
--- a/mris_register/Makefile.am
+++ b/mris_register/Makefile.am
@@ -16,7 +16,7 @@
 
 bin_PROGRAMS = mris_register
 mris_register_SOURCES=mris_register.c mris_register.help.xml.h
-mris_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mris_register_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	-L$(top_builddir)/tetgen -ltetgen $(LIBS_PETSC)
 mris_register_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mris_register_to_volume/Makefile.am
+++ b/mris_register_to_volume/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mris_register_to_volume
 mris_register_to_volume_SOURCES=mris_register_to_volume.c
-mris_register_to_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_register_to_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_register_to_volume_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_remove_variance/Makefile.am
+++ b/mris_remove_variance/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_remove_variance
 mris_remove_variance_SOURCES=mris_remove_variance.c
-mris_remove_variance_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_remove_variance_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_remove_variance_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_resample/Makefile.am
+++ b/mris_resample/Makefile.am
@@ -9,7 +9,7 @@
 
 bin_PROGRAMS = mris_resample
 mris_resample_SOURCES=mris_resample.cpp
-mris_resample_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mris_resample_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(BOOST_PO_LIB) $(ANN_LIBS) -lANN
 mris_resample_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mris_rescale/Makefile.am
+++ b/mris_rescale/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_rescale
 mris_rescale_SOURCES=mris_rescale.c
-mris_rescale_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_rescale_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_rescale_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_reverse/Makefile.am
+++ b/mris_reverse/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_reverse
 mris_reverse_SOURCES=mris_reverse.c
-mris_reverse_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_reverse_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_reverse_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_rotate/Makefile.am
+++ b/mris_rotate/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_rotate
 mris_rotate_SOURCES=mris_rotate.c
-mris_rotate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_rotate_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_rotate_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_sample_label/Makefile.am
+++ b/mris_sample_label/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_sample_label
 mris_sample_label_SOURCES=mris_sample_label.c
-mris_sample_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_sample_label_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_sample_label_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_sample_parc/Makefile.am
+++ b/mris_sample_parc/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_sample_parc
 mris_sample_parc_SOURCES=mris_sample_parc.c
-mris_sample_parc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_sample_parc_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_sample_parc_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_seg2annot/Makefile.am
+++ b/mris_seg2annot/Makefile.am
@@ -31,7 +31,7 @@
 
 bin_PROGRAMS = mris_seg2annot
 mris_seg2annot_SOURCES=mris_seg2annot.c
-mris_seg2annot_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_seg2annot_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_seg2annot_LDFLAGS=$(OS_LDFLAGS)
 # to --------------------------------------------------
 #
--- a/mris_segment_vals/Makefile.am
+++ b/mris_segment_vals/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_segment_vals
 mris_segment_vals_SOURCES=mris_segment_vals.c
-mris_segment_vals_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_segment_vals_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_segment_vals_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_show/Makefile.am
+++ b/mris_show/Makefile.am
@@ -11,9 +11,9 @@
 if HAVE_OPENGL_LIBS
 bin_PROGRAMS = mris_show
 mris_show_SOURCES=mris_show.c
-mris_show_LDADD= $(addprefix $(top_builddir)/,$(LIBS_MGH)) \
-	$(LIBS_OPENGL) $(top_builddir)/glut/libglut.a
-mris_show_LDFLAGS=$(X_LIBS)
+mris_show_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	-lglut
+mris_show_LDFLAGS=$(X_LIBS) $(LIBS_OPENGL)
 else
 bin_PROGRAMS=
 endif
--- a/mris_shrinkwrap/Makefile.am
+++ b/mris_shrinkwrap/Makefile.am
@@ -7,11 +7,11 @@
 
 bin_PROGRAMS = mris_shrinkwrap mris_AA_shrinkwrap
 mris_AA_shrinkwrap_SOURCES=mris_AA_shrinkwrap.c
-mris_AA_shrinkwrap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_AA_shrinkwrap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_AA_shrinkwrap_LDFLAGS=$(OS_LDFLAGS)
 
 mris_shrinkwrap_SOURCES=mris_shrinkwrap.c
-mris_shrinkwrap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_shrinkwrap_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_shrinkwrap_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_smooth/Makefile.am
+++ b/mris_smooth/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_smooth
 
 mris_smooth_SOURCES=mris_smooth.c
-mris_smooth_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_smooth_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_smooth_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/mris_sphere/Makefile.am
+++ b/mris_sphere/Makefile.am
@@ -8,14 +8,14 @@
 bin_PROGRAMS = mris_sphere mris_remove_negative_vertices
 
 mris_sphere_SOURCES=mris_sphere.c mris_sphere.help.xml.h
-mris_sphere_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_sphere_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_sphere_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
 foo_DATA=mris_sphere.help.xml
 
 mris_remove_negative_vertices_SOURCES=mris_remove_negative_vertices.c
-mris_remove_negative_vertices_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_remove_negative_vertices_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_remove_negative_vertices_LDFLAGS=$(OS_LDFLAGS)
 
 ## ----
--- a/mris_spherical_average/Makefile.am
+++ b/mris_spherical_average/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_spherical_average
 mris_spherical_average_SOURCES=mris_spherical_average.c
-mris_spherical_average_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_spherical_average_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_spherical_average_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_surface_change/Makefile.am
+++ b/mris_surface_change/Makefile.am
@@ -33,7 +33,7 @@
 
 bin_PROGRAMS = mris_surface_change
 mris_surface_change_SOURCES=mris_surface_change.c
-mris_surface_change_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_surface_change_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_surface_change_LDFLAGS=$(OS_LDFLAGS)
 
 # to --------------------------------------------------
@@ -58,7 +58,7 @@
 #check_PROGRAMS=myown
 
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_surface_stats/Makefile.am
+++ b/mris_surface_stats/Makefile.am
@@ -7,12 +7,12 @@
 
 bin_PROGRAMS = mris_surface_stats
 mris_surface_stats_SOURCES=mris_surface_stats.c
-mris_surface_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_surface_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_surface_stats_LDFLAGS=$(OS_LDFLAGS)
 
 #check_PROGRAMS=myown
 #myown_SOURCES=myown.c
-#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+#myown_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/mris_surface_to_vol_distances/Makefile.am
+++ b/mris_surface_to_vol_distances/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_surface_to_vol_distances
 mris_surface_to_vol_distances_SOURCES=mris_surface_to_vol_distances.c
-mris_surface_to_vol_distances_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_surface_to_vol_distances_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_surface_to_vol_distances_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_svm_classify/Makefile.am
+++ b/mris_svm_classify/Makefile.am
@@ -7,7 +7,7 @@
 bin_PROGRAMS=mris_svm_classify
 mris_svm_classify_SOURCES=mris_svm_classify.c
 mris_svm_classify_LDADD=\
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(addprefix $(top_builddir)/, svm-lib/libsvm.a)
 mris_svm_classify_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mris_svm_train/Makefile.am
+++ b/mris_svm_train/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_svm_train
 mris_svm_train_SOURCES=mris_svm_train.c
-mris_svm_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mris_svm_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	../svm-lib/libsvm.a
 mris_svm_train_LDFLAGS=$(OS_LDFLAGS)
 
--- a/mris_talairach/Makefile.am
+++ b/mris_talairach/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_talairach
 mris_talairach_SOURCES=mris_talairach.c
-mris_talairach_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_talairach_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_talairach_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_thickness/Makefile.am
+++ b/mris_thickness/Makefile.am
@@ -7,11 +7,11 @@
 
 bin_PROGRAMS = mris_thickness mris_intensity_profile
 mris_thickness_SOURCES=mris_thickness.c
-mris_thickness_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_thickness_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_thickness_LDFLAGS=$(OS_LDFLAGS)
 
 mris_intensity_profile_SOURCES=mris_intensity_profile.c
-mris_intensity_profile_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_intensity_profile_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_intensity_profile_LDFLAGS=$(OS_LDFLAGS)
 
 EXTRA_DIST = mris_cluster_profiles.c
--- a/mris_thickness_comparison/Makefile.am
+++ b/mris_thickness_comparison/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_thickness_comparison
 mris_thickness_comparison_SOURCES=mris_thickness_comparison.c
-mris_thickness_comparison_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_thickness_comparison_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_thickness_comparison_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_thickness_diff/Makefile.am
+++ b/mris_thickness_diff/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = mris_thickness_diff
 mris_thickness_diff_SOURCES=mris_thickness_diff.c
-mris_thickness_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_thickness_diff_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_thickness_diff_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_topo_fixer/Makefile.am
+++ b/mris_topo_fixer/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mris_topo_fixer
 mris_topo_fixer_SOURCES=mris_topo_fixer.cpp
 mris_topo_fixer_LDADD= $(addprefix $(top_builddir)/, \
-	$(LIBS_MGH) utilscpp/libutilscpp.a )
+	$(LIBS_MGH) utilscpp/libutilscpp.a ) $(DLIBS_MGH)
 mris_topo_fixer_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_transform/Makefile.am
+++ b/mris_transform/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_transform
 mris_transform_SOURCES=mris_transform.c
-mris_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_transform_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_transform_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_translate_annotation/Makefile.am
+++ b/mris_translate_annotation/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_translate_annotation
 mris_translate_annotation_SOURCES=mris_translate_annotation.c
-mris_translate_annotation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_translate_annotation_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_translate_annotation_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mris_twoclass/Makefile.am
+++ b/mris_twoclass/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = mris_twoclass
 mris_twoclass_SOURCES=mris_twoclass.c
-mris_twoclass_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_twoclass_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_twoclass_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_volmask/Makefile.am
+++ b/mris_volmask/Makefile.am
@@ -13,7 +13,7 @@
 if HAVE_VTK_LIBS
 bin_PROGRAMS += mris_volmask_vtk
 mris_volmask_vtk_SOURCES=mris_volmask_old.cpp cmd_line_interface.cpp
-mris_volmask_vtk_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+mris_volmask_vtk_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 $(X_LIBS) \
 -ldl -lpthread \
 $(VTK_LIBS) \
@@ -25,18 +25,18 @@
 -lvtkImaging -lvtkftgl \
 -lvtkIO -lvtkFiltering -lvtkCommon -lvtkDICOMParser \
 -lvtksys \
-$(VTK_MPEG2ENCODE_LIB) -lvtkexoIIc -lvtkNetCDF
+$(VTK_MPEG2ENCODE_LIB) -lvtkexoIIc -lnetcdf
 endif
 
 mris_volmask_novtk_SOURCES=mris_volmask_old.cpp cmd_line_interface.cpp
 mris_volmask_novtk_CPPFLAGS=-DNO_VTK
-mris_volmask_novtk_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_volmask_novtk_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 mris_volmask_SOURCES=mris_volmask.cpp cmd_line_interface.cpp \
 	mris_volmask.help.xml.h
 mris_volmask_CPPFLAGS=-DNO_VTK
 mris_volmask_CXXFLAGS=$(AM_CFLAGS) $(VXL_CFLAGS) -Wno-non-virtual-dtor
-mris_volmask_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) 
+mris_volmask_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) 
 
 # trick to get test data into the build directory
 foo_SOURCES=
@@ -59,11 +59,11 @@
 
 #TestMRISOBBTree_SOURCES = TestMRISOBBTree.cpp  
 #TestMRISOBBTree_CXXFLAGS=$(AM_CFLAGS) $(CPPUNIT_CFLAGS) $(VXL_CFLAGS) -Wno-non-virtual-dtor
-#TestMRISOBBTree_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(CPPUNIT_LIBS) -lcppunit
+#TestMRISOBBTree_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(CPPUNIT_LIBS) -lcppunit
 
 #TestMRISDistanceField_SOURCES = TestMRISDistanceField.cpp  
 #TestMRISDistanceField_CXXFLAGS=$(AM_CFLAGS) $(CPPUNIT_CFLAGS) $(VXL_CFLAGS) -Wno-non-virtual-dtor
-#TestMRISDistanceField_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(CPPUNIT_LIBS) -lcppunit
+#TestMRISDistanceField_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(CPPUNIT_LIBS) -lcppunit
 endif
 
 # put a wrapper around the bin, used to setup VTK enviro vars
--- a/mris_volume/Makefile.am
+++ b/mris_volume/Makefile.am
@@ -7,11 +7,11 @@
 
 bin_PROGRAMS = mris_volume mris_wm_volume
 mris_volume_SOURCES=mris_volume.c
-mris_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_volume_LDFLAGS=$(OS_LDFLAGS)
 
 mris_wm_volume_SOURCES=mris_wm_volume.c
-mris_wm_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_wm_volume_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_wm_volume_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/mris_w_to_curv/Makefile.am
+++ b/mris_w_to_curv/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = mris_w_to_curv
 mris_w_to_curv_SOURCES=mris_w_to_curv.c
-mris_w_to_curv_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mris_w_to_curv_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mris_w_to_curv_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/mrisp_paint/Makefile.am
+++ b/mrisp_paint/Makefile.am
@@ -8,7 +8,7 @@
 bin_PROGRAMS = mrisp_paint
 
 mrisp_paint_SOURCES=mrisp_paint.c mrisp_paint.help.xml.h
-mrisp_paint_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mrisp_paint_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mrisp_paint_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/nmovie/Makefile.am
+++ b/nmovie/Makefile.am
@@ -20,11 +20,11 @@
 bin_PROGRAMS = nmovie
 nmovie_SOURCES=nmovie.c
 if ENABLE_XAWPLUS_APPS
-nmovie_LDADD= $(addprefix $(top_builddir)/,$(LIBS_MGH)) \
+nmovie_LDADD= $(addprefix $(top_builddir)/,$(LIBS_MGH)) $(DLIBS_MGH) \
 	$(LIBS_OPENGL) $(XAWPLUS_LIBS) $(LIBS_XAWPLUS) -lXext \
 	$(top_builddir)/glut/libglut.a
 else
-nmovie_LDADD= $(addprefix $(top_builddir)/,$(LIBS_MGH)) \
+nmovie_LDADD= $(addprefix $(top_builddir)/,$(LIBS_MGH)) $(DLIBS_MGH) \
 	$(LIBS_OPENGL) -lXt -lXext -lXaw \
 	$(top_builddir)/glut/libglut.a
 endif
--- a/optseq2/Makefile.am
+++ b/optseq2/Makefile.am
@@ -6,7 +6,7 @@
 
 bin_PROGRAMS = optseq2
 optseq2_SOURCES=optseq2.c
-optseq2_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+optseq2_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 optseq2_LDFLAGS=$(OS_LDFLAGS)
 
 # trick to get test data into the build directory
--- a/orient_mri/Makefile.am
+++ b/orient_mri/Makefile.am
@@ -22,13 +22,13 @@
 	vtkOrientMRIInteractorStyleView2D.h \
 	OrientMRILibInit.cxx
 orient_mri_LDADD= \
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(LIBS_TCL_OPENGL) \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(LIBS_TCL_OPENGL) \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkWidgets -lvtkGraphics \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys \
-	-lvtkHybrid -lvtkexoIIc -lvtkNetCDF \
+	-lvtkHybrid -lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	$(VTK_TIFF_LIB) $(VTK_JPEG_LIB) $(VTK_SQLITE_LIB) \
--- a/qdec/Makefile.am
+++ b/qdec/Makefile.am
@@ -23,11 +23,11 @@
 	QdecUtilities.cxx QdecLibInit.cxx \
 	QdecEvents.h QdecVertexAnnotationLookup.h
 qdec_LDADD=  \
-	$(top_builddir)/fsgdf/libfsgdf.a \
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
-	$(top_builddir)/qdecproject/libqdecproject.a \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(LIBS_TCL_OPENGL) \
+	$(top_builddir)/fsgdf/libfsgdf.la \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
+	$(top_builddir)/qdecproject/libqdecproject.la \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(LIBS_TCL_OPENGL) \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkGraphics \
 	$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	$(VTK_TIFF_LIB) $(VTK_JPEG_LIB) \
@@ -35,7 +35,7 @@
 	$(VTK_SQLITE_LIB) \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys \
-	-lvtkexoIIc -lvtkNetCDF \
+	-lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lvtkWidgets -lvtkHybrid \
 	-lvtkIO	-lvtkDICOMParser $(VTK_MPEG2ENCODE_LIB) \
--- a/qdec_glmfit/Makefile.am
+++ b/qdec_glmfit/Makefile.am
@@ -4,8 +4,8 @@
 
 bin_PROGRAMS = qdec_glmfit
 qdec_glmfit_SOURCES=qdec_glmfit.cxx
-qdec_glmfit_LDADD= $(top_builddir)/qdecproject/libqdecproject.a \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+qdec_glmfit_LDADD= $(top_builddir)/qdecproject/libqdecproject.la \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 qdec_glmfit_LDFLAGS=$(OS_LDFLAGS)
 
 EXCLUDE_FILES=
--- a/rbftest/Makefile.am
+++ b/rbftest/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = rbftest
 rbftest_SOURCES=rbftest.c
-rbftest_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+rbftest_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 rbftest_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/regdat2xfm/Makefile.am
+++ b/regdat2xfm/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = regdat2xfm
 regdat2xfm_SOURCES=regdat2xfm.cpp
-regdat2xfm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+regdat2xfm_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 regdat2xfm_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/repair_siemens_file/Makefile.am
+++ b/repair_siemens_file/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS = repair_siemens_file
 repair_siemens_file_SOURCES=repair_siemens_file.c
-repair_siemens_file_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+repair_siemens_file_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 repair_siemens_file_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/scuba/Makefile.am
+++ b/scuba/Makefile.am
@@ -25,7 +25,7 @@
 # these warnings appear with gcc 4.#
 AM_CXXFLAGS=-Wno-non-virtual-dtor
 
-AM_LDFLAGS=$(LDFLAGS_TCL) $(TIFF_LIBS) $(top_builddir)/glut/libglut.a
+AM_LDFLAGS=$(LDFLAGS_TCL) $(TIFF_LIBS) -lglut
 
 UTILITIES_SRCS=Volume3.cpp Volume3.h \
 	Point2.h \
@@ -112,7 +112,7 @@
 	$(CHART_SRCS) \
 	$(SCUBA1_SRCS) \
 	scuba.cpp
-scuba_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+scuba_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(LIBTIFF) $(LIBS_TCL_OPENGL) $(X_LIBS) -lX11 -lXmu -lGL
 scuba_LDFLAGS=$(AM_LDFLAGS)
 
@@ -184,164 +184,164 @@
 testIDTracker_SOURCES=test_IDTracker.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testIDTracker_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testBroadcaster_SOURCES=test_Broadcaster.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testBroadcaster_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testUtilities_SOURCES=test_Utilities.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testUtilities_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testMatrix44_SOURCES=test_Matrix44.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testMatrix44_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testTransform44_SOURCES=test_Transform44.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testTransform44_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testVolume3_SOURCES=test_Volume3.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testVolume3_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testPath_SOURCES=test_Path.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testPath_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testShortestPathFinder_SOURCES=test_ShortestPathFinder.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testShortestPathFinder_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testVectorOps_SOURCES=test_VectorOps.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testVectorOps_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testRASToVoxel_SOURCES= test_RASToVoxel.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testRASToVoxel_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testToglManager_SOURCES=test_ToglManager.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(GUI_SRCS) $(FSDATA_SRCS)
 testToglManager_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(GLUT_LIBS)
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(GLUT_LIBS)
 
 testDataManager_SOURCES=test_DataManager.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testDataManager_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testTclCommandManager_SOURCES=test_TclCommandManager.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testTclCommandManager_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testPreferencesManager_SOURCES=test_PreferencesManager.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testPreferencesManager_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testUndoManager_SOURCES=test_UndoManager.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS)
 testUndoManager_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testCoordTimer_SOURCES= test_CoordTimer.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS)
 testCoordTimer_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testDataCollection_SOURCES=test_DataCollection.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testDataCollection_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaDataCollections_SOURCES=test_ScubaDataCollections.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testScubaDataCollections_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testVolumeCollection_SOURCES=test_VolumeCollection.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testVolumeCollection_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testSurfaceCollection_SOURCES= test_SurfaceCollection.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testSurfaceCollection_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaKeyCombo_SOURCES=test_ScubaKeyCombo.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS)
 testScubaKeyCombo_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testTclScubaKeyCombo_SOURCES=test_TclScubaKeyCombo.cpp TclScubaKeyCombo.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS)
 testTclScubaKeyCombo_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaLayers_SOURCES=test_ScubaLayers.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS) $(LAYER_SRCS)
 testScubaLayers_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaLayer2DMRI_SOURCES=test_ScubaLayer2DMRI.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS) $(LAYER_SRCS)
 testScubaLayer2DMRI_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaView_SOURCES=test_ScubaView.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(GUI_SRCS) $(FSDATA_SRCS) $(SCUBA1_SRCS)
 testScubaView_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(X_LIBS)
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(X_LIBS)
 
 testScubaFrame_SOURCES=test_ScubaFrame.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS) $(LAYER_SRCS)
 testScubaFrame_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaTransform_SOURCES=test_ScubaTransform.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testScubaTransform_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaColorLUT_SOURCES=test_ScubaColorLUT.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testScubaColorLUT_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaROI_SOURCES=test_ScubaROI.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testScubaROI_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testScubaROIVolume_SOURCES=test_ScubaROIVolume.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS)
 testScubaROIVolume_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testSegmentationVolumeReport_SOURCES=test_SegmentationVolumeReport.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS) \
 	$(LAYER_SRCS) $(CHART_SRCS)
 testSegmentationVolumeReport_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 testTclChartWindow_SOURCES=test_TclChartWindow.cpp TclChartWindow.cpp \
 	$(UTILITIES_SRCS) $(BASIC_SRCS) $(FSDATA_SRCS) $(GUI_SRCS) \
 	$(LAYER_SRCS) $(CHART_SRCS)
 testTclChartWindow_LDADD=$(LIBS_TCL_OPENGL) \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH))
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 endif
 
 if ENABLE_TCLTK_APPS
--- a/scuba2/Makefile.am
+++ b/scuba2/Makefile.am
@@ -68,14 +68,14 @@
 	ScubaLibInit.cxx
 
 scuba2_LDADD=  \
-	$(top_builddir)/fsgdf/libfsgdf.a \
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(LIBS_TCL_OPENGL) \
+	$(top_builddir)/fsgdf/libfsgdf.la \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) $(LIBS_TCL_OPENGL) \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkWidgets -lvtkGraphics \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys \
-	-lvtkHybrid -lvtkexoIIc -lvtkNetCDF \
+	-lvtkHybrid -lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	$(VTK_TIFF_LIB) $(VTK_JPEG_LIB) $(VTK_SQLITE_LIB) \
--- a/spherical_stats/Makefile.am
+++ b/spherical_stats/Makefile.am
@@ -3,7 +3,7 @@
 
 bin_PROGRAMS = spherical_stats
 spherical_stats_SOURCES=spherical_stats.c
-spherical_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+spherical_stats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 spherical_stats_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/stat_normalize/Makefile.am
+++ b/stat_normalize/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = stat_normalize
 stat_normalize_SOURCES=stat_normalize.c
-stat_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+stat_normalize_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 stat_normalize_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
--- a/stim_polar/Makefile.am
+++ b/stim_polar/Makefile.am
@@ -10,8 +10,8 @@
 if HAVE_OPENGL_LIBS
 bin_PROGRAMS = stim_polar
 stim_polar_SOURCES=stim_polar.c $(top_srcdir)/utils/machine.c
-stim_polar_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-	$(X_LIBS) $(LIBS_OPENGL) $(top_builddir)/glut/libglut.a
+stim_polar_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+	$(X_LIBS) $(LIBS_OPENGL) -lglut
 stim_polar_LDFLAGS=
 else
 bin_PROGRAMS=
--- a/talairach_afd/Makefile.am
+++ b/talairach_afd/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = talairach_afd
 talairach_afd_SOURCES=talairach_afd.c
-talairach_afd_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+talairach_afd_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 talairach_afd_LDFLAGS=$(OS_LDFLAGS)
 
 foodir=$(prefix)/docs/xml
--- a/test_makevol/Makefile.am
+++ b/test_makevol/Makefile.am
@@ -8,7 +8,7 @@
 
 bin_PROGRAMS=makevol
 makevol_SOURCES=main.c
-makevol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+makevol_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 makevol_LDFLAGS=$(OS_LDFLAGS)
 
 
--- a/test_window_env/Makefile.am
+++ b/test_window_env/Makefile.am
@@ -7,7 +7,7 @@
 if HAVE_OPENGL_LIBS
 check_PROGRAMS = test_window_env
 test_window_env_SOURCES=test_window_env.c
-test_window_env_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+test_window_env_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(LIBS_OPENGL) $(X_LIBS) -lGL
 test_window_env_LDFLAGS=
 if HAVE_MAC_OSX
--- a/trc/Makefile.am
+++ b/trc/Makefile.am
@@ -21,35 +21,35 @@
                dmri_paths dmri_pathstats dmri_mergepaths
 
 dmri_spline_SOURCES=dmri_spline.cxx spline.cxx spline.h
-dmri_spline_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+dmri_spline_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 dmri_spline_LDFLAGS=$(OS_LDFLAGS)
 
 dmri_trk2trk_SOURCES=dmri_trk2trk.cxx vial.cxx vial.h TrackIO.cxx TrackIO.h
-dmri_trk2trk_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-                  $(top_builddir)/fem_elastic/libfem_elastic.a \
-                  $(top_builddir)/tetgen/libtetgen.a 
+dmri_trk2trk_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+                  $(top_builddir)/fem_elastic/libfem_elastic.la \
+                  $(top_builddir)/tetgen/libtetgen.la -lmpi_cxx
 dmri_trk2trk_LDFLAGS=$(OS_LDFLAGS)
 
 dmri_train_SOURCES=dmri_train.cxx blood.cxx blood.h spline.cxx spline.h \
                    TrackIO.cxx TrackIO.h ByteSwap.h ErrorCode.h
-dmri_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+dmri_train_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 dmri_train_LDFLAGS=$(OS_LDFLAGS)
 
 dmri_paths_SOURCES=dmri_paths.cxx coffin.cxx coffin.h \
                    bite.cxx bite.h spline.cxx spline.h vial.cxx vial.h
-dmri_paths_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
-                  $(top_builddir)/fem_elastic/libfem_elastic.a \
-                  $(top_builddir)/tetgen/libtetgen.a 
+dmri_paths_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
+                  $(top_builddir)/fem_elastic/libfem_elastic.la \
+                  $(top_builddir)/tetgen/libtetgen.la -lmpi_cxx
 dmri_paths_LDFLAGS=$(OS_LDFLAGS)
 
 dmri_pathstats_SOURCES=dmri_pathstats.cxx spline.cxx spline.h \
                        blood.cxx blood.h \
                        TrackIO.cxx TrackIO.h ByteSwap.h ErrorCode.h
-dmri_pathstats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+dmri_pathstats_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 dmri_pathstats_LDFLAGS=$(OS_LDFLAGS)
 
 dmri_mergepaths_SOURCES=dmri_mergepaths.cxx
-dmri_mergepaths_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+dmri_mergepaths_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 dmri_mergepaths_LDFLAGS=$(OS_LDFLAGS)
 
 # endif HAVE_ITK_LIBS, HAVE_PETSC_LIBS, HAVE_BOOST_LIBS
--- a/utils/Makefile.am
+++ b/utils/Makefile.am
@@ -60,8 +60,10 @@
 
 LIBS=
 
-noinst_LIBRARIES=libutils.a
-
+#noinst_LIBRARIES=libutils.a
+noinst_LIBRARIES=
+lib_LTLIBRARIES=libutils.la
+libutils_la_LIBADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) -lnetcdf -lznz -lniftiio -lvnl -lvnl_algo -lv3p_netlib -lexpat -lxml2 -ljpeg -ltiff -lglut
 libutils_main_SOURCES=\
 	afni.c \
 	annotation.c \
@@ -298,7 +300,7 @@
 	$(srcdir)/$(NrrdIO_dir)/write.c \
 	$(srcdir)/$(NrrdIO_dir)/formatNRRD.c
 
-libutils_a_SOURCES=\
+libutils_la_SOURCES=\
 	$(libutils_main_SOURCES) \
 	$(libutils_cephes_SOURCES) \
 	$(libutils_nrrdio_SOURCES)
@@ -342,7 +344,7 @@
 		-DFS_CUDA -DCUDA_FORCE_SYNC -DCUDA_SHOW_TIMINGS \
                 --compiler-options -O3
 
-noinst_LIBRARIES += libutils_cuda.a
+#noinst_LIBRARIES += libutils_cuda.a
 
 libutils_cuda_a_SOURCES=\
 	$(libutils_main_SOURCES) \
@@ -421,11 +423,11 @@
 
 fsPrintHelp_SOURCES=fsPrintHelp.c
 fsPrintHelp_CFLAGS=-DBUILD_MAIN
-fsPrintHelp_LDADD=$(top_builddir)/xml2/libxml2.a -lz
+fsPrintHelp_LDADD=-lxml2 -lz
 fsPrintHelp_LDFLAGS=$(OS_LDFLAGS)
 
 xmlToHtml_SOURCES=xmlToHtml.c
-xmlToHtml_LDADD=$(top_builddir)/xml2/libxml2.a -lz
+xmlToHtml_LDADD=-lxml2 -lz
 
 install-exec-hook:
 	cp $(DESTDIR)$(bindir)/fsPrintHelp $(DESTDIR)$(bindir)/fshelp
--- a/utils/test/Makefile.am
+++ b/utils/test/Makefile.am
@@ -6,11 +6,11 @@
 AM_CPPFLAGS=-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/dicom \
 	-I$(top_srcdir)/include/NrrdIO
-LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH))
+LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 
 #bin_PROGRAMS = MRISresampleOntoSphere
 #MRISresampleOntoSphere_SOURCES=MRISresampleOntoSphere.cpp
-#MRISresampleOntoSphere_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+#MRISresampleOntoSphere_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 #	$(ANN_LIBS) -lANN
 #MRISresampleOntoSphere_LDFLAGS=$(OS_LDFLAGS)
 
@@ -86,12 +86,12 @@
 
 test_nr_wrapper_SOURCES=test_nr_wrapper.cpp
 test_nr_wrapper_CXXFLAGS=$(CPPUNIT_CFLAGS) -Wno-non-virtual-dtor
-test_nr_wrapper_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+test_nr_wrapper_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(CPPUNIT_LIBS) -lcppunit -ldl
 
 test_matrix_SOURCES=test_matrix.cpp
 test_matrix_CXXFLAGS=$(CPPUNIT_CFLAGS) -Wno-non-virtual-dtor
-test_matrix_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+test_matrix_LDADD=$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(CPPUNIT_LIBS) -lcppunit -ldl
 endif
 
--- a/utils/test/mrishash/Makefile.am
+++ b/utils/test/mrishash/Makefile.am
@@ -15,21 +15,21 @@
 #------------- exercise ----------------
 
 mrishash_demo_100_find_coverage_SOURCES=mrishash_demo_100_find_coverage.c
-mrishash_demo_100_find_coverage_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mrishash_demo_100_find_coverage_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mrishash_demo_100_find_coverage_LDFLAGS= $(OS_LDFLAGS)
 
 mrishash_demo_200_mht_hatch_SOURCES=mrishash_demo_200_mht_hatch.c
-mrishash_demo_200_mht_hatch_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mrishash_demo_200_mht_hatch_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mrishash_demo_200_mht_hatch_LDFLAGS= $(OS_LDFLAGS)
 
 ##------------- test ----------------
 
 mrishash_test_100_find_tests_SOURCES=mrishash_test_100_find_tests.c
-mrishash_test_100_find_tests_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mrishash_test_100_find_tests_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mrishash_test_100_find_tests_LDFLAGS= $(OS_LDFLAGS)
 
 mrishash_test_200_intersect_SOURCES=mrishash_test_200_intersect.c
-mrishash_test_200_intersect_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+mrishash_test_200_intersect_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 mrishash_test_200_intersect_LDFLAGS= $(OS_LDFLAGS)
 
 EXTRA_DIST=
--- a/vtkfsio/Makefile.am
+++ b/vtkfsio/Makefile.am
@@ -13,9 +13,9 @@
 
 AM_LDFLAGS=
 
-noinst_LIBRARIES= libvtkfsio.a
+lib_LTLIBRARIES= libvtkfsio.la
 
-libvtkfsio_a_SOURCES=\
+libvtkfsio_la_SOURCES=\
 	vtkFSSurfaceLabelSource.cxx \
 	vtkFSSurfaceLabelSource.h \
 	vtkFSSurfaceWriter.cxx \
@@ -27,7 +27,7 @@
 	vtkFSVolumeSource.cxx \
 	vtkFSVolumeSource.h
 
-EXTRA_DIST=$(libvtkfsio_a_SOURCES) lh.vtkFSSurfaceWriterTestFile
+EXTRA_DIST=$(libvtkfsio_la_SOURCES) lh.vtkFSSurfaceWriterTestFile
 
 if ENABLE_KWWIDGETS_APPS
 check_PROGRAMS = vtkFSSurfaceWriterTester
@@ -40,15 +40,15 @@
 vtkFSSurfaceWriterTester_SOURCES=vtkFSSurfaceWriterTester.cxx
 
 vtkFSSurfaceWriterTester_LDADD=\
-	$(top_builddir)/fsgdf/libfsgdf.a \
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+	$(top_builddir)/fsgdf/libfsgdf.la \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(LDFLAGS_TCL) $(LIBS_TCL_OPENGL) \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkWidgets -lvtkGraphics \
 	-lvtkImaging -lvtkFiltering $(VTK_SQLITE_LIB) \
 	-lvtkCommon -lvtksys \
-	-lvtkHybrid -lvtkexoIIc -lvtkNetCDF \
+	-lvtkHybrid -lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	$(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	$(VTK_TIFF_LIB) $(VTK_JPEG_LIB) \
--- a/vtkutils/Makefile.am
+++ b/vtkutils/Makefile.am
@@ -35,12 +35,12 @@
 AM_LDFLAGS=
 
 if ENABLE_KWWIDGETS_APPS
-noinst_LIBRARIES= libvtkutils.a
+lib_LTLIBRARIES= libvtkutils.la
 else
 noinst_LIBRARIES=
 endif
 
-libvtkutils_a_SOURCES= \
+libvtkutils_la_SOURCES= \
 	vtkKWProgressDialog.cxx \
 	vtkKWRGBATransferFunctionEditor.cxx \
 	vtkKWRGBATransferFunctionEditorTcl.cxx \
@@ -83,17 +83,18 @@
 TESTS=
 endif
 
-IconLoaderTest_SOURCES=IconLoaderTest.cxx IconLoaderTest.h IconLoader.cxx
+IconLoaderTest_SOURCES=IconLoaderTest.cxx IconLoaderTest.h
 
 IconLoaderTest_LDADD=\
-	$(top_builddir)/vtkfsio/libvtkfsio.a \
-	$(top_builddir)/vtkutils/libvtkutils.a \
+	libvtkutils.la \
+	$(top_builddir)/vtkfsio/libvtkfsio.la \
+	$(top_builddir)/vtkutils/libvtkutils.la \
 	$(LDFLAGS_TCL) $(LIBS_TCL_OPENGL) \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) $(VTK_SQLITE_LIB) \
 	-lvtkIO -lvtkWidgets -lvtkGraphics \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys \
-	-lvtkHybrid -lvtkexoIIc -lvtkNetCDF \
+	-lvtkHybrid -lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lexpat $(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	-ltiff $(VTK_TIFF_LIB) -ljpeg $(VTK_JPEG_LIB) \
@@ -120,16 +121,16 @@
 	RgbatransferfunctioneditortesterLibInit.cxx
 
 vtkKWRGBATransferFunctionEditorTester_LDADD=\
-	$(top_builddir)/fsgdf/libfsgdf.a \
+	$(top_builddir)/fsgdf/libfsgdf.la \
 	$(top_builddir)/vtkfsio/libvtkfsio.a \
 	$(top_builddir)/vtkutils/libvtkutils.a \
-	$(addprefix $(top_builddir)/, $(LIBS_MGH)) \
+	$(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH) \
 	$(LDFLAGS_TCL) $(LIBS_TCL_OPENGL) \
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) $(VTK_SQLITE_LIB) \
 	-lvtkWidgets -lvtkGraphics \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys \
-	-lvtkHybrid -lvtkexoIIc -lvtkNetCDF \
+	-lvtkHybrid -lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lexpat $(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	-ltiff $(VTK_TIFF_LIB) -ljpeg $(VTK_JPEG_LIB) \
@@ -150,7 +151,7 @@
 	$(VTK_LIBS) $(VTK_VERDICT_LIB) -lvtkWidgets -lvtkGraphics \
 	-lvtkImaging -lvtkFiltering \
 	-lvtkCommon -lvtksys \
-	-lvtkHybrid -lvtkexoIIc -lvtkNetCDF \
+	-lvtkHybrid -lvtkexoIIc -lnetcdf \
 	-lvtkVolumeRendering -lvtkRendering -lvtkftgl \
 	-lexpat $(VTK_EXPAT_LIB) $(VTK_FREETYPE_LIB) \
 	-ltiff $(VTK_TIFF_LIB) -ljpeg $(VTK_JPEG_LIB) $(VTK_SQLITE_LIB) \
--- a/Makefile.am
+++ b/Makefile.am
@@ -273,7 +273,6 @@
 	mris_surface_stats
 
 FSGDF=\
-	fsgdf \
 	mri_gdfglm \
 	mri_glmfit \
 	mris_glm
@@ -309,6 +308,7 @@
 	log \
 	gpu_utils \
 	opencl_algorithms \
+	fsgdf \
 	utils \
 	utilscpp \
 	vtkfsio \
--- a/rgb/Makefile.am
+++ b/rgb/Makefile.am
@@ -5,8 +5,8 @@
 AM_CPPFLAGS=-I$(top_srcdir)/include -I$(top_srcdir)/include/dicom
 AM_LDFLAGS=
 
-noinst_LIBRARIES= librgb.a
-librgb_a_SOURCES = close.c   name.c  rdwr.c  row.c \
+lib_LTLIBRARIES= librgb.la
+librgb_la_SOURCES = close.c   name.c  rdwr.c  row.c \
 	filbuf.c  open.c  rgbutils.c flsbuf.c  pix.c   rle.c
 
 # Our release target. Include files to be excluded here. They will be
--- a/unix/Makefile.am
+++ b/unix/Makefile.am
@@ -8,9 +8,9 @@
 
 AM_LDFLAGS=
 
-noinst_LIBRARIES=libunix.a
+lib_LTLIBRARIES=libunix.la
 
-libunix_a_SOURCES=cuserid.c unix_thread.c xwin.c \
+libunix_la_SOURCES=cuserid.c unix_thread.c xwin.c \
 	ftime.c windiag.c xwindow.c \
 	oglutil.c xvmri.c texfont.c xvutil.c glStub.c
 
--- a/dicom/Makefile.am
+++ b/dicom/Makefile.am
@@ -7,9 +7,9 @@
 
 AM_LDFLAGS=
 
-noinst_LIBRARIES= libdicom.a
+lib_LTLIBRARIES= libdicom.la
 
-libdicom_a_SOURCES = condition.c dcmcond.c lst.c \
+libdicom_la_SOURCES = condition.c dcmcond.c lst.c \
 	ctnthread.c  dcmdict.c dcm.c dcmsupport.c
 
 EXTRA_DIST=
--- a/hipsstubs/Makefile.am
+++ b/hipsstubs/Makefile.am
@@ -5,8 +5,8 @@
 AM_CPPFLAGS=-I$(top_srcdir)/include -I$(top_srcdir)/include/dicom
 AM_LDFLAGS=
 
-noinst_LIBRARIES= libhipsstubs.a
-libhipsstubs_a_SOURCES = hipsrepl.c  hipsstubs.c
+lib_LTLIBRARIES= libhipsstubs.la
+libhipsstubs_la_SOURCES = hipsrepl.c  hipsstubs.c
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/log/Makefile.am
+++ b/log/Makefile.am
@@ -5,8 +5,8 @@
 AM_CPPFLAGS=-I$(top_srcdir)/include
 AM_LDFLAGS=
 
-noinst_LIBRARIES= liblog.a
-liblog_a_SOURCES = congraph.c  h_logz.c   map.c \
+lib_LTLIBRARIES= liblog.la
+liblog_la_SOURCES = congraph.c  h_logz.c   map.c \
 	connect.c   lmedian.c  runfuncs.c
 
 # Our release target. Include files to be excluded here. They will be
--- a/qdecproject/Makefile.am
+++ b/qdecproject/Makefile.am
@@ -9,13 +9,13 @@
 
 AM_LDFLAGS=
 
-noinst_LIBRARIES= libqdecproject.a
+lib_LTLIBRARIES= libqdecproject.la
 
-libqdecproject_a_SOURCES= QdecContrast.cxx  QdecDataTable.cxx  \
+libqdecproject_la_SOURCES= QdecContrast.cxx  QdecDataTable.cxx  \
 	QdecFactor.cxx QdecGlmDesign.cxx  QdecGlmFit.cxx  QdecGlmFitResults.cxx  \
 	QdecProject.cxx  QdecSubject.cxx
 
-am_libqdecprojet_a_OBJECTS=$(libqdecproject_a_SOURCES:%.cxx=%.o)
+am_libqdecprojet_la_OBJECTS=$(libqdecproject_la_SOURCES:%.cxx=%.o)
 
 EXTRA_DIST=	ProgressUpdateGUI.h  QdecContrast.h  QdecDataTable.h  \
 	QdecFactor.h  QdecGlmDesign.h  QdecGlmFit.h  QdecGlmFitResults.h  \
--- a/tetgen/Makefile.am
+++ b/tetgen/Makefile.am
@@ -6,9 +6,9 @@
 # (but not 64bit!) if compiled with optimization enabled
 
 # build library...
-noinst_LIBRARIES= libtetgen.a
-libtetgen_a_SOURCES = predicates.cxx tetgen.cxx
-libtetgen_a_CXXFLAGS = -DSELF_CHECK -DTETLIBRARY -O0
+lib_LTLIBRARIES= libtetgen.la
+libtetgen_la_SOURCES = predicates.cxx tetgen.cxx
+libtetgen_la_CXXFLAGS = -DSELF_CHECK -DTETLIBRARY -O0
 
 # and binary:
 bin_PROGRAMS = tetgen
--- a/itkio/Makefile.am
+++ b/itkio/Makefile.am
@@ -17,13 +17,13 @@
 
 AM_LDFLAGS=
 
-noinst_LIBRARIES= libitkio.a
+lib_LTLIBRARIES= libitkio.la
 
-libitkio_a_SOURCES= \
+libitkio_la_SOURCES= \
   itkMGHImageIO.cxx \
   itkMGHImageIOFactory.cxx 
 
-am_libitkio_a_OBJECTS=$(libitkio_a_SOURCES:%.cxx=%.o)
+am_libitkio_la_OBJECTS=$(libitkio_la_SOURCES:%.cxx=%.lo)
 
 endif
 #end itk
--- a/itkutils/Makefile.am
+++ b/itkutils/Makefile.am
@@ -17,7 +17,7 @@
 
 AM_LDFLAGS=
 
-noinst_LIBRARIES= libitkutils.a
+lib_LTLIBRARIES= libitkutils.la
 
 BSPLINES_SRCS = \
 	bspline/itkBSplineKernelFunction.txx \
@@ -33,7 +33,7 @@
   ui/FreeSurferExecutable.cxx \
   ui/FreeSurferExecutable.h
 
-libitkutils_a_SOURCES= \
+libitkutils_la_SOURCES= \
   $(BSPLINES_SRCS) \
   $(UI_SRCS) \
   itkOrientedVectorImage.h itkOrientedVectorImage.txx
@@ -41,7 +41,7 @@
 endif
 #end itk
 
-EXTRA_DIST=$(libitkutils_a_SOURCES)
+EXTRA_DIST=$(libitkutils_la_SOURCES)
 
 # Our release target. Include files to be excluded here. They will be
 # found and removed after 'make install' is run during the 'make
--- a/tridec/Makefile.am
+++ b/tridec/Makefile.am
@@ -7,7 +7,7 @@
 
 bin_PROGRAMS = tridec
 tridec_SOURCES=tridec.c
-tridec_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH))
+tridec_LDADD= $(addprefix $(top_builddir)/, $(LIBS_MGH)) $(DLIBS_MGH)
 tridec_LDFLAGS=$(OS_LDFLAGS)
 
 # Our release target. Include files to be excluded here. They will be
